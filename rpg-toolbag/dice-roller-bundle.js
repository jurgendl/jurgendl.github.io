(function(){"use strict";var __webpack_modules__={892:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{w:function(){return Component}});class Component{SUCCESSTEXT="SUCCESS";FAILTEXT="FAIL";SUM_LIST=[];D_LIST=[];init(){{const e=window.localStorage.getItem("MINIMUM");null!=e&&+e>0&&($("#MINIMUM").val(e),$("#MINIMUM").attr("data-slider-value",e),$("#MINIMUMVal").text(e)),$("#MINIMUM").slider(),$("#MINIMUM").on("slide",(e=>{$("#MINIMUMVal").text(e.value)}))}{const e=window.localStorage.getItem("FLAT");null!=e&&+e>0&&($("#FLAT").val(e),$("#FLAT").attr("data-slider-value",e),$("#FLATVal").text(e)),$("#FLAT").slider(),$("#FLAT").on("slide",(e=>{$("#FLATVal").text(e.value)}))}{const e=window.localStorage.getItem("SKILL");null!=e&&(document.getElementById("SKILL").value=e,console.log("restoreSkill:"+e))}{const e=window.localStorage.getItem("TABSVIEW");null!=e&&"true"==e?(console.log("restore TABSVIEW: TRUE"),$("#TABSVIEW").prop("checked",!0),$("#TABSVIEW_PARENT").removeClass("tabsviewoff")):(console.log("restore TABSVIEW: FALSE"),$("#TABSVIEW").prop("checked",!1),$("#TABSVIEW_PARENT").addClass("tabsviewoff"))}{const e=window.localStorage.getItem("W40MODE");null!=e&&"true"==e?($("#W40MODE").prop("checked",!0),$("#TABSVIEW_PARENT").addClass("w40kmode")):($("#W40MODE").prop("checked",!1),$("#TABSVIEW_PARENT").removeClass("w40kmode"))}{const e=window.localStorage.getItem("SUM");null!=e&&"true"==e?$("#SUM").prop("checked",!0):$("#SUM").prop("checked",!1)}{const e=window.localStorage.getItem("DEGREESV_MIN");null!=e&&"true"==e?$("#DEGREESV_MIN").prop("checked",!0):$("#DEGREESV_MIN").prop("checked",!1)}{const e=window.localStorage.getItem("REROLLLOWEST");null!=e&&"true"==e?$("#REROLLLOWEST").prop("checked",!0):$("#REROLLLOWEST").prop("checked",!1)}{const e=window.localStorage.getItem("SHOWFORMULA");null!=e&&"true"==e?($("#SHOWFORMULA").prop("checked",!0),$("#FORMULAPARENT").css({display:"inherit"})):($("#SHOWFORMULA").prop("checked",!1),$("#FORMULAPARENT").css({display:"none"}))}{const e=window.localStorage.getItem("LASMASTERY");null!=e&&"true"==e?$("#LASMASTERY").prop("checked",!0):$("#LASMASTERY").prop("checked",!1)}$("#SHOWFORMULA").change((e=>{window.localStorage.setItem("SHOWFORMULA",$("#SHOWFORMULA").prop("checked")?"true":"false"),window.localStorage.getItem("SHOWFORMULA"),$("#SHOWFORMULA").prop("checked")?(console.log("set SHOWFORMULA: TRUE"),$("#FORMULAPARENT").css({display:"inherit"})):(console.log("set SHOWFORMULA: FALSE"),$("#FORMULAPARENT").css({display:"none"}))})),$("#FLAT").change((e=>{const t=$("#FLAT").val();t&&window.localStorage.setItem("FLAT",t.toString());const o=window.localStorage.getItem("FLAT");console.log("set FLAT:"+o)})),$("#MINIMUM").change((e=>{const t=$("#MINIMUM").val();t&&window.localStorage.setItem("MINIMUM",t.toString());const o=window.localStorage.getItem("MINIMUM");console.log("set MINIMUM:"+o)})),$("#REROLLLOWEST").change((e=>{window.localStorage.setItem("REROLLLOWEST",$("#REROLLLOWEST").prop("checked")?"true":"false");const t=window.localStorage.getItem("REROLLLOWEST");console.log("set REROLLLOWEST:"+t)})),$("#LASMASTERY").change((e=>{window.localStorage.setItem("LASMASTERY",$("#LASMASTERY").prop("checked")?"true":"false");const t=window.localStorage.getItem("LASMASTERY");console.log("set LASMASTERY:"+t)})),$("#SUM").change((e=>{window.localStorage.setItem("SUM",$("#SUM").prop("checked")?"true":"false");const t=window.localStorage.getItem("SUM");console.log("set SUM:"+t)})),$("#DEGREESV_MIN").change((e=>{window.localStorage.setItem("DEGREESV_MIN",$("#DEGREESV_MIN").prop("checked")?"true":"false");const t=window.localStorage.getItem("DEGREESV_MIN");console.log("set DEGREESV_MIN:"+t)})),$("#TABSVIEW").change((e=>{$("#TABSVIEW_PARENT").toggleClass("tabsviewoff"),window.localStorage.setItem("TABSVIEW",$("#TABSVIEW").prop("checked")?"true":"false");const t=window.localStorage.getItem("TABSVIEW");console.log("set TABSVIEW:"+t)})),$("#W40MODE").change((e=>{$("#TABSVIEW_PARENT").toggleClass("w40kmode"),window.localStorage.setItem("W40MODE",$("#W40MODE").prop("checked")?"true":"false");const t=window.localStorage.getItem("W40MODE");console.log("set W40MODE:"+t)})),$('[data-toggle="popover"]').popover({trigger:"focus",html:!0}),$("[data-toggle=confirmation]").confirmation({rootSelector:"[data-toggle=confirmation]"}),$("#clearLatest").confirmation({rootSelector:"#clearLatest",onConfirm:this.clearLatest}),$("#clearSum").confirmation({rootSelector:"#clearSum",onConfirm:this.clearSum}),$("#clearHistory").confirmation({rootSelector:"#clearHistory",onConfirm:this.clearHistory});{const e=this;$("#SKILL").change((t=>{e.change(),e.saveSkill()})),$("#SKILL").keyup((t=>{e.change(),e.saveSkill()})),$("#ROLL").change((t=>{const o=$("#ROLL").val();o&&e.rollSet100(Number(o))})),$("#ROLL").keyup((t=>{if(null==t||"Enter"!==t.key&&13!==t.keyCode)e.change();else{const t=$("#ROLL").val();t&&e.rollSet100(Number(t))}})),$("#FORMULA").change((t=>{e.calcFormula()})),$("#FORMULA").keyup((t=>{e.calcFormula()}))}{let e=0,t=0;for(e=0;e<1e4;e++)t+=this.getRandomInt(100)+1;console.log("test "+t/1e4)}document.getElementById("rollRandom100")?.addEventListener("click",(e=>{this.rollRandom100(e)})),document.getElementById("saveFormulaResult")?.addEventListener("click",(e=>{this.saveFormulaResult()})),document.getElementById("ACCURATE_ROLL")?.addEventListener("click",(e=>{this.rollRandomAccurate(10,"i10")})),$("[rollRandom]").click((e=>{console.log(e),console.log(e.target);const t=e.target.getAttribute("rollRandom");console.log(t),console.log(e.originalEvent),t&&this.rollRandom(e.originalEvent,Number(t),"i"+t)}))}saveSkill(){const e=$("#SKILL").val();e&&(window.localStorage.setItem("SKILL",e.toString()),console.log("saveSkill:"+e))}calcFormula(){try{let FORMULA=$("#FORMULA").val();if(FORMULA){console.log(FORMULA),FORMULA=FORMULA.toString().replace("x","*").replace(":","/").replace("ร","*").replace("รท","/").replace("+","+").replace(",","."),console.log(FORMULA);const FORMULA_EVAL=eval(FORMULA);console.log(FORMULA_EVAL),$("#FORMULA_RESULT").text(FORMULA_EVAL)}}catch(e){console.log(e),$("#FORMULA_RESULT").text("?")}}saveFormulaResult(){$("#SKILL").val($("#FORMULA_RESULT").text()),this.saveSkill()}clearSum(){this.SUM_LIST=[],this.D_LIST=[]}clearHistory(){$("#FULL_HISTORY").html("\x3c!-- --\x3e"),this.clearSum()}clearLatest(){console.log($("#FULL_HISTORY li:first-of-type").attr("data-type")),"array-item"==$("#FULL_HISTORY li:first-of-type").attr("data-type")&&(console.log("last array item removed"),this.SUM_LIST.pop(),this.D_LIST.pop()),$("#FULL_HISTORY li:first-of-type").remove()}rollRandomAccurate(e,t){const o=$("#ACCURATE_ROLL").attr("accurate-dice");console.log("accurate-dice: "+o);for(let l=0;l<Number(o);l++)this.rollRandom(null,e,t)}rollRandom(e,t,o){let l=1;e&&(console.log("SHIFT:"+e.shiftKey),console.log("CTRL:"+e.ctrlKey),e.ctrlKey&&e.shiftKey?l=20:e.ctrlKey?l=10:e.shiftKey&&(l=5));for(let e=0;e<l;e++)this._rollRandom(t,o)}_rollRandom(e,t){const o=this.getRandomInt(e)+1;document.getElementById(t).value=o.toString(),$("#SUM").prop("checked")||this.clearSum(),this.SUM_LIST.push(o),this.D_LIST.push(e);const l=this.checkSameValues(this.D_LIST),a=l&&10==this.D_LIST[0]&&$("#RESULT").val()==this.SUCCESSTEXT&&$("#W40MODE").prop("checked"),s=a&&$("#DEGREESV_MIN").prop("checked"),c=$("#REROLLLOWEST").prop("checked"),r=a&&$("#LASMASTERY").prop("checked"),n=Number($("#MINIMUM").val())>0,i=Number($("#FLAT").val())>0;console.log("SUM_LIST: "+this.SUM_LIST),console.log("D_LIST: "+this.D_LIST);let S=0,L="";const g=[...this.SUM_LIST];if(c){let e=9999999,t=9999999;g.forEach(((o,l,a)=>{o<e&&(e=o,t=l)})),g[t]=-1,console.log("withREROLLLOWEST: "+g)}if(n){const e=Number($("#MINIMUM").val());g.forEach(((t,o,l)=>{t<e&&-1!=t&&(g[o]=e)})),console.log("withMINIMUM: "+g)}if(s){let e=9999999,t=9999999;g.forEach(((o,l,a)=>{o<e&&-1!=o&&(e=o,t=l)}));const o=Math.min(10,Number($("#DEGREESV").val()));e<o&&(g[t]=o),console.log("withDEGREESV_MIN: "+g)}if(L="",S=0,g.forEach(((e,t,o)=>{console.log(e," __ ",t," __ ",o," __ ",this.SUM_LIST[t]," __ ",g[t]," __ ",this.D_LIST[t]),t>0&&(L+=" + "),-1==e?L=l?L+"<span class='cross'>"+this.SUM_LIST[t]+"</span>":L+"<span class='cross'>"+this.SUM_LIST[t]+"/[D"+this.D_LIST[t]+"]</span>":(this.SUM_LIST[t]!=e?L=l?L+this.SUM_LIST[t]+"&#x21E8;"+e:L+this.SUM_LIST[t]+"&#x21E8;"+e+"/[D"+this.D_LIST[t]+"]":l?L+=e:L=L+e+"/[D"+this.D_LIST[t]+"]",$("#W40MODE").prop("checked")?0==t&&10==this.SUM_LIST[t]&&(L+="<i style='margin-left:2px;' class='fas fa-meteor text-warning'></i>"):20==this.SUM_LIST[t]&&20==this.D_LIST[t]&&(L+="<i style='margin-left:2px;' class='fas fa-meteor text-warning'></i>"),S+=e)})),r){const e=Math.floor((Number($("#DEGREESV").val())-1)/2);e>0&&(S+=e)}if(i&&(S+=Number($("#FLAT").val())),L="<span style='width:35px;' class='badge badge-pill badge-info'>"+S+"</span> = &Sigma;[#"+this.SUM_LIST.length+"]("+L+")",l&&(L=L+"/[D"+this.D_LIST[0]+"]"),i&&(L=L+" + "+Number($("#FLAT").val())+" (Flat Bonus)"),r){const e=Math.floor((Number($("#DEGREESV").val())-1)/2);e>0&&(L=L+" + "+e+" (Las Mastery)")}const d="<span style='display:inline;color:inherit;font-family:monospace;'>",E=(new Date).toLocaleTimeString(this.getNavigatorLanguages()[0])+" &#8669; roll "+d+"<span style='width:35px;' class='badge badge-pill badge-info'>"+(""+o).padStart(3," ")+"</span></span> "+d+(" op D"+e).padStart(6," ")+" &#8669; </span> "+L;$("#LAST_HISTORY").html(E),$("#FULL_HISTORY").prepend("<li class='list-group-item' data-type='array-item'>"+E+"</li>")}checkSameValues(e){return 1==new Set(e).size}rollRandom100(e){let t;if(console.log("SHIFT:"+e.shiftKey),console.log("CTRL:"+e.ctrlKey),e.ctrlKey&&e.shiftKey)for(t=0;t<20;t++)this._rollRandom100();else if(e.ctrlKey)for(t=0;t<10;t++)this._rollRandom100();else if(e.shiftKey)for(t=0;t<5;t++)this._rollRandom100();else this._rollRandom100()}_rollRandom100(){const e=this.getRandomInt(100)+1;$("#ROLL").val(e),this.rollSet100(e)}rollSet100(e){this.clearSum(),this.change();const t=Number($("#SKILL").val()),o=$("#RESULT").val()==this.SUCCESSTEXT,l=$("#DEGREESV").val(),a="<span style='display:inline;color:inherit;font-family:monospace;'>",s=(new Date).toLocaleTimeString(this.getNavigatorLanguages()[0])+" &#8669; roll <span style='width:35px;' class='badge badge-pill badge-info'>"+a+"</span>"+(""+e).padStart(3," ")+"</span> op skill "+a+(""+t).padStart(3," ")+"</span> &#8669; "+(o?" <span style='width:65px;' class='badge badge-pill badge-success'>"+this.SUCCESSTEXT+"</span>":"<span style='width:65px;' class='badge badge-pill badge-warning'>"+this.FAILTEXT+"</span>")+" met <span style='width:35px;' class='badge badge-pill badge-dark'>"+l+"</span> degrees";$("#LAST_HISTORY").html(s),$("#FULL_HISTORY").prepend("<li class='list-group-item' data-type='roll-item'>"+s+"</li>")}getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}change(){const e=Number($("#SKILL").val()),t=Number($("#ROLL").val());let o,l;if(console.log("ROLL<=SKILL :: "+t+"<="+e+" :: "+(t<=e)),t<=e){const a=(e-t)/10;console.log("diff="+a),o=1+Math.floor(a),l=!0,console.log(this.SUCCESSTEXT+" +"+o+" DEGREESV")}else{const a=(t-e-1)/10;console.log("diff="+a),o=1+Math.floor(a),l=!1,console.log(this.FAILTEXT+" -"+o+" DEGREESV")}if($("#RESULT").val(l?this.SUCCESSTEXT:this.FAILTEXT),l){$("#RESULT").addClass("bg-success"),$("#RESULT").removeClass("bg-warning"),$("#RESULT").addClass("text-white");const e=Math.min(2,Math.floor(o/2));console.log("ACCURATE="+e),$("#ACCURATE_ROLL").html("+"+e+"D"),$("#ACCURATE_ROLL").attr("accurate-dice",1+e)}else $("#RESULT").removeClass("bg-success"),$("#RESULT").addClass("bg-warning"),$("#RESULT").addClass("text-white"),$("#ACCURATE_ROLL").html("-"),$("#ACCURATE_ROLL").attr("accurate-dice",0);$("#DEGREESV").val(o)}getNavigatorLanguages(){return console.log(navigator.language),navigator.language.split("-")}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var o=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](o,o.exports,__webpack_require__),o.exports}__webpack_require__.d=function(e,t){for(var o in t)__webpack_require__.o(t,o)&&!__webpack_require__.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var __webpack_exports__={};(new(__webpack_require__(892).w)).init()})();
//# sourceMappingURL=dice-roller-bundle.js.map