function eliminateDuplicates(t){var e,r=t.length,n=[],a={};for(e=0;e<r;e++)a[t[e]]=0;for(e in a)n.push(e);return n}function drawChart(t,e){document.getElementById("body").innerHTML="";var r,n=t,a=[20,20,20,20],i=1920-a[1]-a[3],o=28*e-a[0]-a[2],l=0,u=d3.layout.tree().size([o,i]),c=d3.svg.diagonal().projection((function(t){return[t.y,t.x]})),s=d3.select("#body").append("svg:svg").attr("width",i+a[1]+a[3]).attr("height",o+a[0]+a[2]).append("svg:g").attr("transform","translate("+a[3]+","+a[0]+")");(r=n).x0=o/2,r.y0=0,function(t){var e=d3.event&&d3.event.altKey?5e3:500,n=u.nodes(r).reverse();n.forEach((function(t){t.y=240*t.depth}));var a=s.selectAll("g.node").data(n,(function(t){return t.id||(t.id=++l)})),i=a.enter().append("svg:g").attr("class","node").attr("transform",(function(e){return"translate("+t.y0+","+t.x0+")"})).on("click",(function(t){}));i.append("svg:circle").attr("r",10),i.append("a").attr("xlink:href",(function(t){return t.url})).append("svg:text").attr("x",(function(t){return 0})).attr("dy",(function(t){return"0.35em"})).attr("text-anchor",(function(t){return"middle"})).attr("title",(function(t){let e="";if(t.data){t.data.benefit&&(e+=t.data.benefit);let r=[t.data.apt1,t.data.apt2];r=r.filter((t=>"General"!=t)),r=eliminateDuplicates(r),1==r.length?e+=" [ apt: "+r[0]+" ] ":2==r.length&&(e+=" [ apt: "+r[0]+", "+r[1]+" ] "),t.data.prerequisites&&(e+=" [ prereq: "+t.data.prerequisites+" ] ")}return""==e?null:e})).text((function(t){return t.name})).style("fill",(function(t){return"white"})).style("fill-opacity",1e-6),i.append("svg:title").text((function(t){return t.description}));var o=a.transition().duration(e).attr("transform",(function(t){return"translate("+t.y+","+t.x+")"}));o.select("circle").attr("r",10),o.select("text").style("fill-opacity",1);var d=a.exit().transition().duration(e).attr("transform",(function(e){return"translate("+t.y+","+t.x+")"})).remove();d.select("circle").attr("r",10),d.select("text").style("fill-opacity",1e-6);var f=s.selectAll("path.link").data(u.links(n),(function(t){return t.target.id}));f.enter().insert("svg:path","g").attr("class","link").attr("depth",(function(t){return t.target.depth})).attr("d",(function(e){var r={x:t.x0,y:t.y0};return c({source:r,target:r})})).transition().duration(e).attr("d",c),f.transition().duration(e).attr("d",c),f.exit().transition().duration(e).attr("d",(function(e){var r={x:t.x,y:t.y};return c({source:r,target:r})})).remove(),n.forEach((function(t){t.x0=t.x,t.y0=t.y}))}(r)}