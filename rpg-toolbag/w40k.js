!function(){"use strict";var e={};function t(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();const n=4294967296,i=[4294967295,-n],r=[0,-0x8000000000000000],s=[0,0],o=[1,0];function a(e,t){return u(e[0]+t[0],e[1]+t[1])}function c(e){var t=[];return t[e-1]=void 0,t}function l(e,t){return i=~~Math.max(Math.min(e[1]/n,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/n,2147483647),-2147483648),r=h(e)&h(t),s=r,r<0&&(s+=n),[s,i*n];var i,r,s}function d(e,t){var n,i;return e[0]==t[0]&&e[1]==t[1]?0:(n=e[1]<0,i=t[1]<0,n&&!i?-1:!n&&i?1:v(e,t)[1]<0?-1:1)}function u(e,t){var i,r;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(i=t%n)+(r=Math.floor(e/n)*n),e=e-r+i;e<0;)e+=n,t-=n;for(;e>4294967295;)e-=n,t+=n;for(t%=0x10000000000000000;t>0x7fffffff00000000;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function p(e,t){return e[0]==t[0]&&e[1]==t[1]}function f(e){return e>=0?[e,0]:[e+n,-n]}function h(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-n,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function m(e){return e<=30?1<<e:m(30)*m(e-30)}function _(e,t){var i,o,a,c;if(t&=63,p(e,r))return t?s:e;if(e[1]<0)throw new Error("Neg");return c=m(t),o=e[1]*c%0x10000000000000000,(o+=i=(a=e[0]*c)-a%n)>=0x8000000000000000&&(o-=0x10000000000000000),[a-=i,o]}function g(e,t){var n;return n=m(t&=63),u(Math.floor(e[0]/n),e[1]/n)}function v(e,t){return u(e[0]-t[0],e[1]-t[1])}function b(e,t){return e.buf=t,e.pos=0,e.count=t.length,e}function y(e){return e.pos>=e.count?-1:255&e.buf[e.pos++]}function k(e,t,n,i){return e.pos>=e.count?-1:(i=Math.min(i,e.count-e.pos),S(e.buf,e.pos,t,n,i),e.pos+=i,i)}function P(e){return e.buf=c(32),e.count=0,e}function w(e){var t=e.buf;return t.length=e.count,t}function E(e,t){e.buf[e.count++]=t<<24>>24}function x(e,t,n,i){S(t,n,e.buf,e.count,i),e.count+=i}function S(e,t,n,i,r){for(var s=0;s<r;++s)n[i+s]=e[t+s]}function T(e,t){return e._bufferBase[e._bufferOffset+e._pos+t]}function B(e,t,n,i){var r,s;for(e._streamEndWasReached&&e._pos+t+i>e._streamPos&&(i=e._streamPos-(e._pos+t)),++n,s=e._bufferOffset+e._pos+t,r=0;r<i&&e._bufferBase[s+r]==e._bufferBase[s+r-n];++r);return r}function C(e){return e._streamPos-e._pos}function L(e){var t,n;if(!e._streamEndWasReached)for(;;){if(!(n=-e._bufferOffset+e._blockSize-e._streamPos))return;if(-1==(t=k(e._stream,e._bufferBase,e._bufferOffset+e._streamPos,n)))return e._posLimit=e._streamPos,e._bufferOffset+e._posLimit>e._pointerToLastSafePosition&&(e._posLimit=e._pointerToLastSafePosition-e._bufferOffset),void(e._streamEndWasReached=1);e._streamPos+=t,e._streamPos>=e._pos+e._keepSizeAfter&&(e._posLimit=e._streamPos-e._keepSizeAfter)}}function A(e,t){e._bufferOffset+=t,e._posLimit-=t,e._pos-=t,e._streamPos-=t}var D=function(){var e,t,n,i=[];for(e=0;e<256;++e){for(n=e,t=0;t<8;++t)0!=(1&n)?n=n>>>1^-306674912:n>>>=1;i[e]=n}return i}();function M(e){var t;++e._cyclicBufferPos>=e._cyclicBufferSize&&(e._cyclicBufferPos=0),function(e){++e._pos,e._pos>e._posLimit&&(e._bufferOffset+e._pos>e._pointerToLastSafePosition&&function(e){var t,n,i;for((i=e._bufferOffset+e._pos-e._keepSizeBefore)>0&&--i,n=e._bufferOffset+e._streamPos-i,t=0;t<n;++t)e._bufferBase[t]=e._bufferBase[i+t];e._bufferOffset-=i}(e),L(e))}(e),1073741823==e._pos&&(t=e._pos-e._cyclicBufferSize,O(e._son,2*e._cyclicBufferSize,t),O(e._hash,e._hashSizeSum,t),A(e,t))}function O(e,t,n){var i,r;for(i=0;i<t;++i)(r=e[i]||0)<=n?r=0:r-=n,e[i]=r}function R(e){var t=e._pos-e._streamPos;t&&(x(e._stream,e._buffer,e._streamPos,t),e._pos>=e._windowSize&&(e._pos=0),e._streamPos=e._pos)}function I(e,t){var n=e._pos-t-1;return n<0&&(n+=e._windowSize),e._buffer[n]}function H(e){R(e),e._stream=null}function W(e){return(e-=2)<4?e:3}function F(e){return e<4?0:e<10?e-3:e-6}function z(e){if(!e.alive)throw new Error("bad state");return e.encoder?function(e){(function(e,t,n,i){var r,c,l,u,m,_,g,b,y,k,P,w,E,x,S;if(t[0]=s,n[0]=s,i[0]=1,e._inStream&&(e._matchFinder._stream=e._inStream,function(e){e._bufferOffset=0,e._pos=0,e._streamPos=0,e._streamEndWasReached=0,L(e),e._cyclicBufferPos=0,A(e,-1)}(e._matchFinder),e._needReleaseMFStream=1,e._inStream=null),!e._finished){if(e._finished=1,x=e.nowPos64,p(e.nowPos64,s)){if(!C(e._matchFinder))return void K(e,h(e.nowPos64));ne(e),E=h(e.nowPos64)&e._posStateMask,Ce(e._rangeEncoder,e._isMatch,(e._state<<4)+E,0),e._state=F(e._state),l=T(e._matchFinder,-e._additionalOffset),pe(ue(e._literalEncoder,h(e.nowPos64),e._previousByte),e._rangeEncoder,l),e._previousByte=l,--e._additionalOffset,e.nowPos64=a(e.nowPos64,o)}if(C(e._matchFinder))for(;;){if(g=X(e,h(e.nowPos64)),k=e.backRes,E=h(e.nowPos64)&e._posStateMask,c=(e._state<<4)+E,1==g&&-1==k)Ce(e._rangeEncoder,e._isMatch,c,0),l=T(e._matchFinder,-e._additionalOffset),S=ue(e._literalEncoder,h(e.nowPos64),e._previousByte),e._state<7?pe(S,e._rangeEncoder,l):(y=T(e._matchFinder,-e._repDistances[0]-1-e._additionalOffset),fe(S,e._rangeEncoder,y,l)),e._previousByte=l,e._state=F(e._state);else{if(Ce(e._rangeEncoder,e._isMatch,c,1),k<4){if(Ce(e._rangeEncoder,e._isRep,e._state,1),k?(Ce(e._rangeEncoder,e._isRepG0,e._state,1),1==k?Ce(e._rangeEncoder,e._isRepG1,e._state,0):(Ce(e._rangeEncoder,e._isRepG1,e._state,1),Ce(e._rangeEncoder,e._isRepG2,e._state,k-2))):(Ce(e._rangeEncoder,e._isRepG0,e._state,0),Ce(e._rangeEncoder,e._isRep0Long,c,1==g?0:1)),1==g?e._state=e._state<7?9:11:(ae(e._repMatchLenEncoder,e._rangeEncoder,g-2,E),e._state=e._state<7?8:11),u=e._repDistances[k],0!=k){for(_=k;_>=1;--_)e._repDistances[_]=e._repDistances[_-1];e._repDistances[0]=u}}else{for(Ce(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,ae(e._lenEncoder,e._rangeEncoder,g-2,E),w=re(k-=4),b=W(g),ye(e._posSlotEncoder[b],e._rangeEncoder,w),w>=4&&(P=k-(r=(2|1&w)<<(m=(w>>1)-1)),w<14?Ee(e._posEncoders,r-w-1,e._rangeEncoder,m,P):(Le(e._rangeEncoder,P>>4,m-4),Pe(e._posAlignEncoder,e._rangeEncoder,15&P),++e._alignPriceCount)),u=k,_=3;_>=1;--_)e._repDistances[_]=e._repDistances[_-1];e._repDistances[0]=u,++e._matchPriceCount}e._previousByte=T(e._matchFinder,g-1-e._additionalOffset)}if(e._additionalOffset-=g,e.nowPos64=a(e.nowPos64,f(g)),!e._additionalOffset){if(e._matchPriceCount>=128&&J(e),e._alignPriceCount>=16&&Z(e),t[0]=e.nowPos64,n[0]=Ae(e._rangeEncoder),!C(e._matchFinder))return void K(e,h(e.nowPos64));if(d(v(e.nowPos64,x),[4096,0])>=0)return e._finished=0,void(i[0]=0)}}else K(e,h(e.nowPos64))}})(e.encoder,e.encoder.processedInSize,e.encoder.processedOutSize,e.encoder.finished),e.inBytesProcessed=e.encoder.processedInSize[0],e.encoder.finished[0]&&(function(e){ie(e),e._rangeEncoder.Stream=null}(e.encoder),e.alive=0)}(e):function(e){var t=function(e){var t,n,i,r,s,c;if(c=h(e.nowPos64)&e.m_PosStateMask,Se(e.m_RangeDecoder,e.m_IsMatchDecoders,(e.state<<4)+c)){if(Se(e.m_RangeDecoder,e.m_IsRepDecoders,e.state))i=0,Se(e.m_RangeDecoder,e.m_IsRepG0Decoders,e.state)?(Se(e.m_RangeDecoder,e.m_IsRepG1Decoders,e.state)?(Se(e.m_RangeDecoder,e.m_IsRepG2Decoders,e.state)?(n=e.rep3,e.rep3=e.rep2):n=e.rep2,e.rep2=e.rep1):n=e.rep1,e.rep1=e.rep0,e.rep0=n):Se(e.m_RangeDecoder,e.m_IsRep0LongDecoders,(e.state<<4)+c)||(e.state=e.state<7?9:11,i=1),i||(i=N(e.m_RepLenDecoder,e.m_RangeDecoder,c)+2,e.state=e.state<7?8:11);else if(e.rep3=e.rep2,e.rep2=e.rep1,e.rep1=e.rep0,i=2+N(e.m_LenDecoder,e.m_RangeDecoder,c),e.state=e.state<7?7:10,(s=ve(e.m_PosSlotDecoder[W(i)],e.m_RangeDecoder))>=4){if(r=(s>>1)-1,e.rep0=(2|1&s)<<r,s<14)e.rep0+=function(e,t,n,i){var r,s,o=1,a=0;for(s=0;s<i;++s)r=Se(n,e,t+o),o<<=1,o+=r,a|=r<<s;return a}(e.m_PosDecoders,e.rep0-s-1,e.m_RangeDecoder,r);else if(e.rep0+=function(e,t){var n,i,r=0;for(n=t;0!=n;--n)e.Range>>>=1,i=e.Code-e.Range>>>31,e.Code-=e.Range&i-1,r=r<<1|1-i,-16777216&e.Range||(e.Code=e.Code<<8|y(e.Stream),e.Range<<=8);return r}(e.m_RangeDecoder,r-4)<<4,e.rep0+=function(e,t){var n,i,r=1,s=0;for(i=0;i<e.NumBitLevels;++i)n=Se(t,e.Models,r),r<<=1,r+=n,s|=n<<i;return s}(e.m_PosAlignDecoder,e.m_RangeDecoder),e.rep0<0)return-1==e.rep0?1:-1}else e.rep0=s;if(d(f(e.rep0),e.nowPos64)>=0||e.rep0>=e.m_DictionarySizeCheck)return-1;!function(e,t,n){var i=e._pos-t-1;for(i<0&&(i+=e._windowSize);0!=n;--n)i>=e._windowSize&&(i=0),e._buffer[e._pos++]=e._buffer[i++],e._pos>=e._windowSize&&R(e)}(e.m_OutWindow,e.rep0,i),e.nowPos64=a(e.nowPos64,f(i)),e.prevByte=I(e.m_OutWindow,0)}else t=function(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}(e.m_LiteralDecoder,h(e.nowPos64),e.prevByte),e.state<7?e.prevByte=function(e,t){var n=1;do{n=n<<1|Se(t,e.m_Decoders,n)}while(n<256);return n<<24>>24}(t,e.m_RangeDecoder):e.prevByte=function(e,t,n){var i,r,s=1;do{if(r=n>>7&1,n<<=1,s=s<<1|(i=Se(t,e.m_Decoders,(1+r<<8)+s)),r!=i){for(;s<256;)s=s<<1|Se(t,e.m_Decoders,s);break}}while(s<256);return s<<24>>24}(t,e.m_RangeDecoder,I(e.m_OutWindow,e.rep0)),function(e,t){e._buffer[e._pos++]=t,e._pos>=e._windowSize&&R(e)}(e.m_OutWindow,e.prevByte),e.state=F(e.state),e.nowPos64=a(e.nowPos64,o);return 0}(e.decoder);if(-1==t)throw new Error("corrupted input");e.inBytesProcessed=i,e.outBytesProcessed=e.decoder.nowPos64,(t||d(e.decoder.outSize,s)>=0&&d(e.decoder.nowPos64,e.decoder.outSize)>=0)&&(R(e.decoder.m_OutWindow),H(e.decoder.m_OutWindow),e.decoder.m_RangeDecoder.Stream=null,e.alive=0)}(e),e.alive}function q(e,t){for(;e.m_NumPosStates<t;++e.m_NumPosStates)e.m_LowCoder[e.m_NumPosStates]=ge({},3),e.m_MidCoder[e.m_NumPosStates]=ge({},3)}function N(e,t,n){if(!Se(t,e.m_Choice,0))return ve(e.m_LowCoder[n],t);var i=8;return Se(t,e.m_Choice,1)?i+=8+ve(e.m_HighCoder,t):i+=ve(e.m_MidCoder[n],t),i}function j(e){return e.m_Choice=c(2),e.m_LowCoder=c(16),e.m_MidCoder=c(16),e.m_HighCoder=ge({},8),e.m_NumPosStates=0,e}function V(e){Te(e.m_Choice);for(var t=0;t<e.m_NumPosStates;++t)Te(e.m_LowCoder[t].Models),Te(e.m_MidCoder[t].Models);Te(e.m_HighCoder.Models)}function G(e){return e.m_Decoders=c(768),e}var U=function(){var e,t,n,i=2,r=[0,1];for(n=2;n<22;++n)for(t=1<<(n>>1)-1,e=0;e<t;++e,++i)r[i]=n<<24>>24;return r}();function Y(e,t){var n,i,r,s;e._optimumEndIndex=t,r=e._optimum[t].PosPrev,i=e._optimum[t].BackPrev;do{e._optimum[t].Prev1IsChar&&(_e(e._optimum[r]),e._optimum[r].PosPrev=r-1,e._optimum[t].Prev2&&(e._optimum[r-1].Prev1IsChar=0,e._optimum[r-1].PosPrev=e._optimum[t].PosPrev2,e._optimum[r-1].BackPrev=e._optimum[t].BackPrev2)),s=r,n=i,i=e._optimum[s].BackPrev,r=e._optimum[s].PosPrev,e._optimum[s].BackPrev=n,e._optimum[s].PosPrev=t,t=s}while(t>0);return e.backRes=e._optimum[0].BackPrev,e._optimumCurrentIndex=e._optimum[0].PosPrev,e._optimumCurrentIndex}function Z(e){for(var t=0;t<16;++t)e._alignPrices[t]=we(e._posAlignEncoder,t);e._alignPriceCount=0}function J(e){var t,n,i,r,s,o,a,c;for(r=4;r<128;++r)t=(2|1&(o=re(r)))<<(i=(o>>1)-1),e.tempPrices[r]=xe(e._posEncoders,t-o-1,i,r-t);for(s=0;s<4;++s){for(n=e._posSlotEncoder[s],a=s<<6,o=0;o<e._distTableSize;++o)e._posSlotPrices[a+o]=ke(n,o);for(o=14;o<e._distTableSize;++o)e._posSlotPrices[a+o]+=(o>>1)-1-4<<6;for(c=128*s,r=0;r<4;++r)e._distancesPrices[c+r]=e._posSlotPrices[a+r];for(;r<128;++r)e._distancesPrices[c+r]=e._posSlotPrices[a+re(r)]+e.tempPrices[r]}e._matchPriceCount=0}function K(e,t){ie(e),function(e,t){if(e._writeEndMark){Ce(e._rangeEncoder,e._isMatch,(e._state<<4)+t,1),Ce(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,ae(e._lenEncoder,e._rangeEncoder,0,t);var n=W(2);ye(e._posSlotEncoder[n],e._rangeEncoder,63),Le(e._rangeEncoder,67108863,26),Pe(e._posAlignEncoder,e._rangeEncoder,15)}}(e,t&e._posStateMask);for(var n=0;n<5;++n)De(e._rangeEncoder)}function X(e,t){var n,i,r,s,o,a,c,l,d,u,p,f,h,m,_,g,v,b,y,k,P,w,E,x,S,L,A,D,M,O,R,I,H,W,$,z,q,N,j,V,G,U,Z,J;if(e._optimumEndIndex!=e._optimumCurrentIndex)return h=e._optimum[e._optimumCurrentIndex].PosPrev-e._optimumCurrentIndex,e.backRes=e._optimum[e._optimumCurrentIndex].BackPrev,e._optimumCurrentIndex=e._optimum[e._optimumCurrentIndex].PosPrev,h;if(e._optimumCurrentIndex=e._optimumEndIndex=0,e._longestMatchWasFound?(f=e._longestMatchLength,e._longestMatchWasFound=0):f=ne(e),L=e._numDistancePairs,(x=C(e._matchFinder)+1)<2)return e.backRes=-1,1;for(x>273&&(x=273),j=0,d=0;d<4;++d)e.reps[d]=e._repDistances[d],e.repLens[d]=B(e._matchFinder,-1,e.reps[d],273),e.repLens[d]>e.repLens[j]&&(j=d);if(e.repLens[j]>=e._numFastBytes)return e.backRes=j,te(e,(h=e.repLens[j])-1),h;if(f>=e._numFastBytes)return e.backRes=e._matchDistances[L-1]+4,te(e,f-1),f;if(c=T(e._matchFinder,-1),v=T(e._matchFinder,-e._repDistances[0]-1-1),f<2&&c!=v&&e.repLens[j]<2)return e.backRes=-1,1;if(e._optimum[0].State=e._state,H=t&e._posStateMask,e._optimum[1].Price=Be[e._isMatch[(e._state<<4)+H]>>>2]+me(ue(e._literalEncoder,t,e._previousByte),e._state>=7,v,c),_e(e._optimum[1]),N=(b=Be[2048-e._isMatch[(e._state<<4)+H]>>>2])+Be[2048-e._isRep[e._state]>>>2],v==c&&(V=N+function(e,t,n){return Be[e._isRepG0[t]>>>2]+Be[e._isRep0Long[(t<<4)+n]>>>2]}(e,e._state,H),V<e._optimum[1].Price&&(e._optimum[1].Price=V,function(e){e.BackPrev=0,e.Prev1IsChar=0}(e._optimum[1]))),(p=f>=e.repLens[j]?f:e.repLens[j])<2)return e.backRes=e._optimum[1].BackPrev,1;e._optimum[1].PosPrev=0,e._optimum[0].Backs0=e.reps[0],e._optimum[0].Backs1=e.reps[1],e._optimum[0].Backs2=e.reps[2],e._optimum[0].Backs3=e.reps[3],u=p;do{e._optimum[u--].Price=268435455}while(u>=2);for(d=0;d<4;++d)if(!((q=e.repLens[d])<2)){$=N+ee(e,d,e._state,H);do{(s=$+le(e._repMatchLenEncoder,q-2,H))<(O=e._optimum[q]).Price&&(O.Price=s,O.PosPrev=0,O.BackPrev=d,O.Prev1IsChar=0)}while(--q>=2)}if(E=b+Be[e._isRep[e._state]>>>2],(u=e.repLens[0]>=2?e.repLens[0]+1:2)<=f){for(A=0;u>e._matchDistances[A];)A+=2;for(;(s=E+Q(e,l=e._matchDistances[A+1],u,H))<(O=e._optimum[u]).Price&&(O.Price=s,O.PosPrev=0,O.BackPrev=l+4,O.Prev1IsChar=0),u!=e._matchDistances[A]||(A+=2)!=L;++u);}for(n=0;;){if(++n==p)return Y(e,n);if(y=ne(e),L=e._numDistancePairs,y>=e._numFastBytes)return e._longestMatchLength=y,e._longestMatchWasFound=1,Y(e,n);if(++t,I=e._optimum[n].PosPrev,e._optimum[n].Prev1IsChar?(--I,e._optimum[n].Prev2?(U=e._optimum[e._optimum[n].PosPrev2].State,U=e._optimum[n].BackPrev2<4?U<7?8:11:U<7?7:10):U=e._optimum[I].State,U=F(U)):U=e._optimum[I].State,I==n-1?U=e._optimum[n].BackPrev?F(U):U<7?9:11:(e._optimum[n].Prev1IsChar&&e._optimum[n].Prev2?(I=e._optimum[n].PosPrev2,R=e._optimum[n].BackPrev2,U=U<7?8:11):U=(R=e._optimum[n].BackPrev)<4?U<7?8:11:U<7?7:10,M=e._optimum[I],R<4?R?1==R?(e.reps[0]=M.Backs1,e.reps[1]=M.Backs0,e.reps[2]=M.Backs2,e.reps[3]=M.Backs3):2==R?(e.reps[0]=M.Backs2,e.reps[1]=M.Backs0,e.reps[2]=M.Backs1,e.reps[3]=M.Backs3):(e.reps[0]=M.Backs3,e.reps[1]=M.Backs0,e.reps[2]=M.Backs1,e.reps[3]=M.Backs2):(e.reps[0]=M.Backs0,e.reps[1]=M.Backs1,e.reps[2]=M.Backs2,e.reps[3]=M.Backs3):(e.reps[0]=R-4,e.reps[1]=M.Backs0,e.reps[2]=M.Backs1,e.reps[3]=M.Backs2)),e._optimum[n].State=U,e._optimum[n].Backs0=e.reps[0],e._optimum[n].Backs1=e.reps[1],e._optimum[n].Backs2=e.reps[2],e._optimum[n].Backs3=e.reps[3],a=e._optimum[n].Price,c=T(e._matchFinder,-1),v=T(e._matchFinder,-e.reps[0]-1-1),H=t&e._posStateMask,k=0,(i=a+Be[e._isMatch[(U<<4)+H]>>>2]+me(ue(e._literalEncoder,t,T(e._matchFinder,-2)),U>=7,v,c))<(P=e._optimum[n+1]).Price&&(P.Price=i,P.PosPrev=n,P.BackPrev=-1,P.Prev1IsChar=0,k=1),N=(b=a+Be[2048-e._isMatch[(U<<4)+H]>>>2])+Be[2048-e._isRep[U]>>>2],v!=c||P.PosPrev<n&&!P.BackPrev||(V=N+(Be[e._isRepG0[U]>>>2]+Be[e._isRep0Long[(U<<4)+H]>>>2]))<=P.Price&&(P.Price=V,P.PosPrev=n,P.BackPrev=0,P.Prev1IsChar=0,k=1),!((x=S=4095-n<(S=C(e._matchFinder)+1)?4095-n:S)<2)){if(x>e._numFastBytes&&(x=e._numFastBytes),!k&&v!=c&&(J=Math.min(S-1,e._numFastBytes),(_=B(e._matchFinder,0,e.reps[0],J))>=2)){for(Z=F(U),W=t+1&e._posStateMask,w=i+Be[2048-e._isMatch[(Z<<4)+W]>>>2]+Be[2048-e._isRep[Z]>>>2],D=n+1+_;p<D;)e._optimum[++p].Price=268435455;(s=w+(le(e._repMatchLenEncoder,_-2,W)+ee(e,0,Z,W)))<(O=e._optimum[D]).Price&&(O.Price=s,O.PosPrev=n+1,O.BackPrev=0,O.Prev1IsChar=1,O.Prev2=0)}for(G=2,z=0;z<4;++z)if(!((m=B(e._matchFinder,-1,e.reps[z],x))<2)){g=m;do{for(;p<n+m;)e._optimum[++p].Price=268435455;(s=N+(le(e._repMatchLenEncoder,m-2,H)+ee(e,z,U,H)))<(O=e._optimum[n+m]).Price&&(O.Price=s,O.PosPrev=n,O.BackPrev=z,O.Prev1IsChar=0)}while(--m>=2);if(m=g,z||(G=m+1),m<S&&(J=Math.min(S-1-m,e._numFastBytes),(_=B(e._matchFinder,m,e.reps[z],J))>=2)){for(Z=U<7?8:11,W=t+m&e._posStateMask,r=N+(le(e._repMatchLenEncoder,m-2,H)+ee(e,z,U,H))+Be[e._isMatch[(Z<<4)+W]>>>2]+me(ue(e._literalEncoder,t+m,T(e._matchFinder,m-1-1)),1,T(e._matchFinder,m-1-(e.reps[z]+1)),T(e._matchFinder,m-1)),Z=F(Z),W=t+m+1&e._posStateMask,w=r+Be[2048-e._isMatch[(Z<<4)+W]>>>2]+Be[2048-e._isRep[Z]>>>2],D=m+1+_;p<n+D;)e._optimum[++p].Price=268435455;(s=w+(le(e._repMatchLenEncoder,_-2,W)+ee(e,0,Z,W)))<(O=e._optimum[n+D]).Price&&(O.Price=s,O.PosPrev=n+m+1,O.BackPrev=0,O.Prev1IsChar=1,O.Prev2=1,O.PosPrev2=n,O.BackPrev2=z)}}if(y>x){for(y=x,L=0;y>e._matchDistances[L];L+=2);e._matchDistances[L]=y,L+=2}if(y>=G){for(E=b+Be[e._isRep[U]>>>2];p<n+y;)e._optimum[++p].Price=268435455;for(A=0;G>e._matchDistances[A];)A+=2;for(m=G;;++m)if((s=E+Q(e,o=e._matchDistances[A+1],m,H))<(O=e._optimum[n+m]).Price&&(O.Price=s,O.PosPrev=n,O.BackPrev=o+4,O.Prev1IsChar=0),m==e._matchDistances[A]){if(m<S&&(J=Math.min(S-1-m,e._numFastBytes),(_=B(e._matchFinder,m,o,J))>=2)){for(Z=U<7?7:10,W=t+m&e._posStateMask,r=s+Be[e._isMatch[(Z<<4)+W]>>>2]+me(ue(e._literalEncoder,t+m,T(e._matchFinder,m-1-1)),1,T(e._matchFinder,m-(o+1)-1),T(e._matchFinder,m-1)),Z=F(Z),W=t+m+1&e._posStateMask,w=r+Be[2048-e._isMatch[(Z<<4)+W]>>>2]+Be[2048-e._isRep[Z]>>>2],D=m+1+_;p<n+D;)e._optimum[++p].Price=268435455;(s=w+(le(e._repMatchLenEncoder,_-2,W)+ee(e,0,Z,W)))<(O=e._optimum[n+D]).Price&&(O.Price=s,O.PosPrev=n+m+1,O.BackPrev=0,O.Prev1IsChar=1,O.Prev2=1,O.PosPrev2=n,O.BackPrev2=o+4)}if((A+=2)==L)break}}}}}function Q(e,t,n,i){var r=W(n);return(t<128?e._distancesPrices[128*r+t]:e._posSlotPrices[(r<<6)+function(e){return e<131072?U[e>>6]+12:e<134217728?U[e>>16]+32:U[e>>26]+52}(t)]+e._alignPrices[15&t])+le(e._lenEncoder,n-2,i)}function ee(e,t,n,i){var r;return t?(r=Be[2048-e._isRepG0[n]>>>2],1==t?r+=Be[e._isRepG1[n]>>>2]:(r+=Be[2048-e._isRepG1[n]>>>2],r+=Me(e._isRepG2[n],t-2))):(r=Be[e._isRepG0[n]>>>2],r+=Be[2048-e._isRep0Long[(n<<4)+i]>>>2]),r}function te(e,t){t>0&&(function(e,t){var n,i,r,s,o,a,c,l,d,u,p,f,h,m,_,g,v;do{if(e._pos+e._matchMaxLen<=e._streamPos)f=e._matchMaxLen;else if((f=e._streamPos-e._pos)<e.kMinMatchCheck){M(e);continue}for(h=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,i=e._bufferOffset+e._pos,e.HASH_ARRAY?(a=1023&(v=D[255&e._bufferBase[i]]^255&e._bufferBase[i+1]),e._hash[a]=e._pos,c=65535&(v^=(255&e._bufferBase[i+2])<<8),e._hash[1024+c]=e._pos,l=(v^D[255&e._bufferBase[i+3]]<<5)&e._hashMask):l=255&e._bufferBase[i]^(255&e._bufferBase[i+1])<<8,r=e._hash[e.kFixHashSize+l],e._hash[e.kFixHashSize+l]=e._pos,_=1+(e._cyclicBufferPos<<1),g=e._cyclicBufferPos<<1,u=p=e.kNumHashDirectBytes,n=e._cutValue;;){if(r<=h||0==n--){e._son[_]=e._son[g]=0;break}if(s=((o=e._pos-r)<=e._cyclicBufferPos?e._cyclicBufferPos-o:e._cyclicBufferPos-o+e._cyclicBufferSize)<<1,m=e._bufferOffset+r,d=u<p?u:p,e._bufferBase[m+d]==e._bufferBase[i+d]){for(;++d!=f&&e._bufferBase[m+d]==e._bufferBase[i+d];);if(d==f){e._son[g]=e._son[s],e._son[_]=e._son[s+1];break}}(255&e._bufferBase[m+d])<(255&e._bufferBase[i+d])?(e._son[g]=r,g=s+1,r=e._son[g],p=d):(e._son[_]=r,_=s,r=e._son[_],u=d)}M(e)}while(0!=--t)}(e._matchFinder,t),e._additionalOffset+=t)}function ne(e){var t=0;return e._numDistancePairs=function(e,t){var n,i,r,s,o,a,c,l,d,u,p,f,h,m,_,g,v,b,y,k,P;if(e._pos+e._matchMaxLen<=e._streamPos)m=e._matchMaxLen;else if((m=e._streamPos-e._pos)<e.kMinMatchCheck)return M(e),0;for(v=0,_=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,i=e._bufferOffset+e._pos,g=1,l=0,d=0,e.HASH_ARRAY?(l=1023&(P=D[255&e._bufferBase[i]]^255&e._bufferBase[i+1]),d=65535&(P^=(255&e._bufferBase[i+2])<<8),u=(P^D[255&e._bufferBase[i+3]]<<5)&e._hashMask):u=255&e._bufferBase[i]^(255&e._bufferBase[i+1])<<8,r=e._hash[e.kFixHashSize+u]||0,e.HASH_ARRAY&&(s=e._hash[l]||0,o=e._hash[1024+d]||0,e._hash[l]=e._pos,e._hash[1024+d]=e._pos,s>_&&e._bufferBase[e._bufferOffset+s]==e._bufferBase[i]&&(t[v++]=g=2,t[v++]=e._pos-s-1),o>_&&e._bufferBase[e._bufferOffset+o]==e._bufferBase[i]&&(o==s&&(v-=2),t[v++]=g=3,t[v++]=e._pos-o-1,s=o),0!=v&&s==r&&(v-=2,g=1)),e._hash[e.kFixHashSize+u]=e._pos,y=1+(e._cyclicBufferPos<<1),k=e._cyclicBufferPos<<1,f=h=e.kNumHashDirectBytes,0!=e.kNumHashDirectBytes&&r>_&&e._bufferBase[e._bufferOffset+r+e.kNumHashDirectBytes]!=e._bufferBase[i+e.kNumHashDirectBytes]&&(t[v++]=g=e.kNumHashDirectBytes,t[v++]=e._pos-r-1),n=e._cutValue;;){if(r<=_||0==n--){e._son[y]=e._son[k]=0;break}if(a=((c=e._pos-r)<=e._cyclicBufferPos?e._cyclicBufferPos-c:e._cyclicBufferPos-c+e._cyclicBufferSize)<<1,b=e._bufferOffset+r,p=f<h?f:h,e._bufferBase[b+p]==e._bufferBase[i+p]){for(;++p!=m&&e._bufferBase[b+p]==e._bufferBase[i+p];);if(g<p&&(t[v++]=g=p,t[v++]=c-1,p==m)){e._son[k]=e._son[a],e._son[y]=e._son[a+1];break}}(255&e._bufferBase[b+p])<(255&e._bufferBase[i+p])?(e._son[k]=r,k=a+1,r=e._son[k],h=p):(e._son[y]=r,y=a,r=e._son[y],f=p)}return M(e),v}(e._matchFinder,e._matchDistances),e._numDistancePairs>0&&(t=e._matchDistances[e._numDistancePairs-2])==e._numFastBytes&&(t+=B(e._matchFinder,t-1,e._matchDistances[e._numDistancePairs-1],273-t)),++e._additionalOffset,t}function ie(e){e._matchFinder&&e._needReleaseMFStream&&(e._matchFinder._stream=null,e._needReleaseMFStream=0)}function re(e){return e<2048?U[e]:e<2097152?U[e>>10]+20:U[e>>20]+40}function se(e,t){Te(e._choice);for(var n=0;n<t;++n)Te(e._lowCoder[n].Models),Te(e._midCoder[n].Models);Te(e._highCoder.Models)}function oe(e,t,n,i,r){var s,o,a,c,l;for(s=Be[e._choice[0]>>>2],a=(o=Be[2048-e._choice[0]>>>2])+Be[e._choice[1]>>>2],c=o+Be[2048-e._choice[1]>>>2],l=0,l=0;l<8;++l){if(l>=n)return;i[r+l]=s+ke(e._lowCoder[t],l)}for(;l<16;++l){if(l>=n)return;i[r+l]=a+ke(e._midCoder[t],l-8)}for(;l<n;++l)i[r+l]=c+ke(e._highCoder,l-8-8)}function ae(e,t,n,i){!function(e,t,n,i){n<8?(Ce(t,e._choice,0,0),ye(e._lowCoder[i],t,n)):(n-=8,Ce(t,e._choice,0,1),n<8?(Ce(t,e._choice,1,0),ye(e._midCoder[i],t,n)):(Ce(t,e._choice,1,1),ye(e._highCoder,t,n-8)))}(e,t,n,i),0==--e._counters[i]&&(oe(e,i,e._tableSize,e._prices,272*i),e._counters[i]=e._tableSize)}function ce(e){return function(e){e._choice=c(2),e._lowCoder=c(16),e._midCoder=c(16),e._highCoder=be({},8);for(var t=0;t<16;++t)e._lowCoder[t]=be({},3),e._midCoder[t]=be({},3)}(e),e._prices=[],e._counters=[],e}function le(e,t,n){return e._prices[272*n+t]}function de(e,t){for(var n=0;n<t;++n)oe(e,n,e._tableSize,e._prices,272*n),e._counters[n]=e._tableSize}function ue(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}function pe(e,t,n){var i,r,s=1;for(r=7;r>=0;--r)i=n>>r&1,Ce(t,e.m_Encoders,s,i),s=s<<1|i}function fe(e,t,n,i){var r,s,o,a,c=1,l=1;for(s=7;s>=0;--s)r=i>>s&1,a=l,c&&(a+=1+(o=n>>s&1)<<8,c=o==r),Ce(t,e.m_Encoders,a,r),l=l<<1|r}function he(e){return e.m_Encoders=c(768),e}function me(e,t,n,i){var r,s,o=1,a=7,c=0;if(t)for(;a>=0;--a)if(s=n>>a&1,r=i>>a&1,c+=Me(e.m_Encoders[(1+s<<8)+o],r),o=o<<1|r,s!=r){--a;break}for(;a>=0;--a)r=i>>a&1,c+=Me(e.m_Encoders[o],r),o=o<<1|r;return c}function _e(e){e.BackPrev=-1,e.Prev1IsChar=0}function ge(e,t){return e.NumBitLevels=t,e.Models=c(1<<t),e}function ve(e,t){var n,i=1;for(n=e.NumBitLevels;0!=n;--n)i=(i<<1)+Se(t,e.Models,i);return i-(1<<e.NumBitLevels)}function be(e,t){return e.NumBitLevels=t,e.Models=c(1<<t),e}function ye(e,t,n){var i,r,s=1;for(r=e.NumBitLevels;0!=r;)i=n>>>--r&1,Ce(t,e.Models,s,i),s=s<<1|i}function ke(e,t){var n,i,r=1,s=0;for(i=e.NumBitLevels;0!=i;)n=t>>>--i&1,s+=Me(e.Models[r],n),r=(r<<1)+n;return s}function Pe(e,t,n){var i,r,s=1;for(r=0;r<e.NumBitLevels;++r)i=1&n,Ce(t,e.Models,s,i),s=s<<1|i,n>>=1}function we(e,t){var n,i,r=1,s=0;for(i=e.NumBitLevels;0!=i;--i)n=1&t,t>>>=1,s+=Me(e.Models[r],n),r=r<<1|n;return s}function Ee(e,t,n,i,r){var s,o,a=1;for(o=0;o<i;++o)Ce(n,e,t+a,s=1&r),a=a<<1|s,r>>=1}function xe(e,t,n,i){var r,s,o=1,a=0;for(s=n;0!=s;--s)r=1&i,i>>>=1,a+=Be[(2047&(e[t+o]-r^-r))>>>2],o=o<<1|r;return a}function Se(e,t,n){var i,r=t[n];return i=(e.Range>>>11)*r,(-2147483648^e.Code)<(-2147483648^i)?(e.Range=i,t[n]=r+(2048-r>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|y(e.Stream),e.Range<<=8),0):(e.Range-=i,e.Code-=i,t[n]=r-(r>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|y(e.Stream),e.Range<<=8),1)}function Te(e){for(var t=e.length-1;t>=0;--t)e[t]=1024}var Be=function(){var e,t,n,i=[];for(t=8;t>=0;--t)for(e=1<<9-t,n=1<<9-t-1;n<e;++n)i[n]=(t<<6)+(e-n<<6>>>9-t-1);return i}();function Ce(e,t,n,i){var r,s=t[n];r=(e.Range>>>11)*s,i?(e.Low=a(e.Low,l(f(r),[4294967295,0])),e.Range-=r,t[n]=s-(s>>>5)<<16>>16):(e.Range=r,t[n]=s+(2048-s>>>5)<<16>>16),-16777216&e.Range||(e.Range<<=8,De(e))}function Le(e,t,n){for(var i=n-1;i>=0;--i)e.Range>>>=1,1==(t>>>i&1)&&(e.Low=a(e.Low,f(e.Range))),-16777216&e.Range||(e.Range<<=8,De(e))}function Ae(e){return a(a(f(e._cacheSize),e._position),[4,0])}function De(e){var t,n,i,r,s=h((i=32,r=g(n=e.Low,i&=63),n[1]<0&&(r=a(r,_([2,0],31))),r));if(0!=s||d(e.Low,[4278190080,0])<0){e._position=a(e._position,f(e._cacheSize)),t=e._cache;do{E(e.Stream,t+s),t=255}while(0!=--e._cacheSize);e._cache=h(e.Low)>>>24}++e._cacheSize,e.Low=_(l(e.Low,[16777215,0]),8)}function Me(e,t){return Be[(2047&(e-t^-t))>>>2]}const Oe=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];function Re(e,{mode:t=7,enableEndMark:n=!0}={}){var r={};for(r.c=function(e,t,n,r){return e.output=P({}),function(e,t,n,r,o,a){var l,u;if(d(r,i)<0)throw new Error("invalid length "+r);for(e.length_0=r,l=function(e){var t;for(e._repDistances=c(4),e._optimum=[],e._rangeEncoder={},e._isMatch=c(192),e._isRep=c(12),e._isRepG0=c(12),e._isRepG1=c(12),e._isRepG2=c(12),e._isRep0Long=c(192),e._posSlotEncoder=[],e._posEncoders=c(114),e._posAlignEncoder=be({},4),e._lenEncoder=ce({}),e._repMatchLenEncoder=ce({}),e._literalEncoder={},e._matchDistances=[],e._posSlotPrices=[],e._distancesPrices=[],e._alignPrices=c(16),e.reps=c(4),e.repLens=c(4),e.processedInSize=[s],e.processedOutSize=[s],e.finished=[0],e.properties=c(5),e.tempPrices=c(128),e._longestMatchLength=0,e._matchFinderType=1,e._numDistancePairs=0,e._numFastBytesPrev=-1,e.backRes=0,t=0;t<4096;++t)e._optimum[t]={};for(t=0;t<4;++t)e._posSlotEncoder[t]=be({},6);return e}({}),function(e,t){!function(e,t){e._dictionarySize=t;for(var n=0;t>1<<n;++n);e._distTableSize=2*n}(t,1<<e.s),t._numFastBytes=e.f,function(e,t){var n=e._matchFinderType;e._matchFinderType=t,e._matchFinder&&n!=e._matchFinderType&&(e._dictionarySizePrev=-1,e._matchFinder=null)}(t,e.m),t._numLiteralPosStateBits=0,t._numLiteralContextBits=3,t._posStateBits=2,t._posStateMask=3}(o,l),l._writeEndMark=a,function(e,t){e.properties[0]=9*(5*e._posStateBits+e._numLiteralPosStateBits)+e._numLiteralContextBits<<24>>24;for(var n=0;n<4;++n)e.properties[1+n]=e._dictionarySize>>8*n<<24>>24;x(t,e.properties,0,5)}(l,n),u=0;u<64;u+=8)E(n,255&h(g(r,u)));e.chunker=(l._needReleaseMFStream=0,l._inStream=t,l._finished=0,function(e){var t,n;e._matchFinder||(t={},n=4,e._matchFinderType||(n=2),function(e,t){e.HASH_ARRAY=t>2,e.HASH_ARRAY?(e.kNumHashDirectBytes=0,e.kMinMatchCheck=4,e.kFixHashSize=66560):(e.kNumHashDirectBytes=2,e.kMinMatchCheck=3,e.kFixHashSize=0)}(t,n),e._matchFinder=t),function(e,t,n){var i,r;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,r=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=c(r),i=0;i<r;++i)e.m_Coders[i]=he({})}(e._literalEncoder,e._numLiteralPosStateBits,e._numLiteralContextBits),(e._dictionarySize!=e._dictionarySizePrev||e._numFastBytesPrev!=e._numFastBytes)&&(function(e,t,n,i,r){var s,o;t<1073741567&&(e._cutValue=16+(i>>1),function(e,t,n,i){var r;e._keepSizeBefore=t,e._keepSizeAfter=n,r=t+n+i,(null==e._bufferBase||e._blockSize!=r)&&(e._bufferBase=null,e._blockSize=r,e._bufferBase=c(e._blockSize)),e._pointerToLastSafePosition=e._blockSize-n}(e,t+4096,i+274,256+~~((t+4096+i+274)/2)),e._matchMaxLen=i,s=t+1,e._cyclicBufferSize!=s&&(e._son=c(2*(e._cyclicBufferSize=s))),o=65536,e.HASH_ARRAY&&(o=t-1,o|=o>>1,o|=o>>2,o|=o>>4,o|=o>>8,o>>=1,(o|=65535)>16777216&&(o>>=1),e._hashMask=o,++o,o+=e.kFixHashSize),o!=e._hashSizeSum&&(e._hash=c(e._hashSizeSum=o)))}(e._matchFinder,e._dictionarySize,0,e._numFastBytes),e._dictionarySizePrev=e._dictionarySize,e._numFastBytesPrev=e._numFastBytes)}(l),l._rangeEncoder.Stream=n,function(e){(function(e){e._state=0,e._previousByte=0;for(var t=0;t<4;++t)e._repDistances[t]=0})(e),function(e){e._position=s,e.Low=s,e.Range=-1,e._cacheSize=1,e._cache=0}(e._rangeEncoder),Te(e._isMatch),Te(e._isRep0Long),Te(e._isRep),Te(e._isRepG0),Te(e._isRepG1),Te(e._isRepG2),Te(e._posEncoders),function(e){var t,n=1<<e.m_NumPrevBits+e.m_NumPosBits;for(t=0;t<n;++t)Te(e.m_Coders[t].m_Encoders)}(e._literalEncoder);for(var t=0;t<4;++t)Te(e._posSlotEncoder[t].Models);se(e._lenEncoder,1<<e._posStateBits),se(e._repMatchLenEncoder,1<<e._posStateBits),Te(e._posAlignEncoder.Models),e._longestMatchWasFound=0,e._optimumEndIndex=0,e._optimumCurrentIndex=0,e._additionalOffset=0}(l),J(l),Z(l),l._lenEncoder._tableSize=l._numFastBytes+1-2,de(l._lenEncoder,1<<l._posStateBits),l._repMatchLenEncoder._tableSize=l._numFastBytes+1-2,de(l._repMatchLenEncoder,1<<l._posStateBits),l.nowPos64=s,function(e,t){return e.encoder=t,e.decoder=null,e.alive=1,e}({},l))}(e,b({},t),e.output,f(t.length),n,r),e}({},function(e){var t,n,i,r=[],s=0,o=e.length;if("object"==typeof e)return e;for(function(e,t,n,i,r){var s;for(s=0;s<n;++s)i[r++]=e.charCodeAt(s)}(e,0,o,r,0),i=0;i<o;++i)(t=r[i])>=1&&t<=127?++s:s+=!t||t>=128&&t<=2047?2:3;for(n=[],s=0,i=0;i<o;++i)(t=r[i])>=1&&t<=127?n[s++]=t<<24>>24:!t||t>=128&&t<=2047?(n[s++]=(192|t>>6&31)<<24>>24,n[s++]=(128|63&t)<<24>>24):(n[s++]=(224|t>>12&15)<<24>>24,n[s++]=(128|t>>6&63)<<24>>24,n[s++]=(128|63&t)<<24>>24);return n}(e),function(e){return Oe[e-1]||Oe[6]}(t),n);z(r.c.chunker););return w(r.c.output)}function Ie(e){var t={};for(t.d=function(e,t){return e.output=P({}),function(e,t,n){var r,o,a,l,d="",u=[];for(o=0;o<5;++o){if(-1==(a=y(t)))throw new Error("truncated input");u[o]=a<<24>>24}if(r=function(e){e.m_OutWindow={},e.m_RangeDecoder={},e.m_IsMatchDecoders=c(192),e.m_IsRepDecoders=c(12),e.m_IsRepG0Decoders=c(12),e.m_IsRepG1Decoders=c(12),e.m_IsRepG2Decoders=c(12),e.m_IsRep0LongDecoders=c(192),e.m_PosSlotDecoder=c(4),e.m_PosDecoders=c(114),e.m_PosAlignDecoder=ge({},4),e.m_LenDecoder=j({}),e.m_RepLenDecoder=j({}),e.m_LiteralDecoder={};for(var t=0;t<4;++t)e.m_PosSlotDecoder[t]=ge({},6);return e}({}),!function(e,t){var n,i,r,s,o,a,l;if(t.length<5)return 0;for(r=(l=255&t[0])%9,s=(a=~~(l/9))%5,o=~~(a/5),n=0,i=0;i<4;++i)n+=(255&t[1+i])<<8*i;return n>99999999||!function(e,t,n,i){if(t>8||n>4||i>4)return 0;!function(e,t,n){var i,r;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,r=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=c(r),i=0;i<r;++i)e.m_Coders[i]=G({})}(e.m_LiteralDecoder,n,t);var r=1<<i;return q(e.m_LenDecoder,r),q(e.m_RepLenDecoder,r),e.m_PosStateMask=r-1,1}(e,r,s,o)?0:function(e,t){return t<0?0:(e.m_DictionarySize!=t&&(e.m_DictionarySize=t,e.m_DictionarySizeCheck=Math.max(e.m_DictionarySize,1),function(e,t){null!=e._buffer&&e._windowSize==t||(e._buffer=c(t)),e._windowSize=t,e._pos=0,e._streamPos=0}(e.m_OutWindow,Math.max(e.m_DictionarySizeCheck,4096))),1)}(e,n)}(r,u))throw new Error("corrupted input");for(o=0;o<64;o+=8){if(-1==(a=y(t)))throw new Error("truncated input");1==(a=a.toString(16)).length&&(a="0"+a),d=a+""+d}/^0+$|^f+$/i.test(d)?e.length_0=i:(l=parseInt(d,16),e.length_0=l>4294967295?i:f(l)),e.chunker=function(e,t,n,i){return e.m_RangeDecoder.Stream=t,H(e.m_OutWindow),e.m_OutWindow._stream=n,function(e){e.m_OutWindow._streamPos=0,e.m_OutWindow._pos=0,Te(e.m_IsMatchDecoders),Te(e.m_IsRep0LongDecoders),Te(e.m_IsRepDecoders),Te(e.m_IsRepG0Decoders),Te(e.m_IsRepG1Decoders),Te(e.m_IsRepG2Decoders),Te(e.m_PosDecoders),function(e){var t,n;for(n=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<n;++t)Te(e.m_Coders[t].m_Decoders)}(e.m_LiteralDecoder);for(var t=0;t<4;++t)Te(e.m_PosSlotDecoder[t].Models);V(e.m_LenDecoder),V(e.m_RepLenDecoder),Te(e.m_PosAlignDecoder.Models),function(e){e.Code=0,e.Range=-1;for(var t=0;t<5;++t)e.Code=e.Code<<8|y(e.Stream)}(e.m_RangeDecoder)}(e),e.state=0,e.rep0=0,e.rep1=0,e.rep2=0,e.rep3=0,e.outSize=i,e.nowPos64=s,e.prevByte=0,function(e,t){return e.decoder=t,e.encoder=null,e.alive=1,e}({},e)}(r,t,n,e.length_0)}(e,b({},t),e.output),e}({},e);z(t.d.chunker););return function(e){for(var t,n,i,r=0,s=0,o=e.length,a=[],c=[];r<o;++r,++s){if(128&(t=255&e[r]))if(192==(224&t)){if(r+1>=o)return e;if(128!=(192&(n=255&e[++r])))return e;c[s]=(31&t)<<6|63&n}else{if(224!=(240&t))return e;if(r+2>=o)return e;if(128!=(192&(n=255&e[++r])))return e;if(128!=(192&(i=255&e[++r])))return e;c[s]=(15&t)<<12|(63&n)<<6|63&i}else{if(!t)return e;c[s]=t}16383==s&&(a.push(String.fromCharCode.apply(String,c)),s=-1)}return s>0&&(c.length=s,a.push(String.fromCharCode.apply(String,c))),a.join("")}(w(t.d.output))}function He(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function We(e){return e instanceof He(e).Element||e instanceof Element}function $e(e){return e instanceof He(e).HTMLElement||e instanceof HTMLElement}function Fe(e){return"undefined"!=typeof ShadowRoot&&(e instanceof He(e).ShadowRoot||e instanceof ShadowRoot)}var ze=Math.max,qe=Math.min,Ne=Math.round;function je(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function Ve(){return!/^((?!chrome|android).)*safari/i.test(je())}function Ge(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),r=1,s=1;t&&$e(e)&&(r=e.offsetWidth>0&&Ne(i.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Ne(i.height)/e.offsetHeight||1);var o=(We(e)?He(e):window).visualViewport,a=!Ve()&&n,c=(i.left+(a&&o?o.offsetLeft:0))/r,l=(i.top+(a&&o?o.offsetTop:0))/s,d=i.width/r,u=i.height/s;return{width:d,height:u,top:l,right:c+d,bottom:l+u,left:c,x:c,y:l}}function Ue(e){var t=He(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Ye(e){return e?(e.nodeName||"").toLowerCase():null}function Ze(e){return((We(e)?e.ownerDocument:e.document)||window.document).documentElement}function Je(e){return Ge(Ze(e)).left+Ue(e).scrollLeft}function Ke(e){return He(e).getComputedStyle(e)}function Xe(e){var t=Ke(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Qe(e,t,n){void 0===n&&(n=!1);var i,r,s=$e(t),o=$e(t)&&function(e){var t=e.getBoundingClientRect(),n=Ne(t.width)/e.offsetWidth||1,i=Ne(t.height)/e.offsetHeight||1;return 1!==n||1!==i}(t),a=Ze(t),c=Ge(e,o,n),l={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(s||!s&&!n)&&(("body"!==Ye(t)||Xe(a))&&(l=(i=t)!==He(i)&&$e(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:Ue(i)),$e(t)?((d=Ge(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):a&&(d.x=Je(a))),{x:c.left+l.scrollLeft-d.x,y:c.top+l.scrollTop-d.y,width:c.width,height:c.height}}function et(e){var t=Ge(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function tt(e){return"html"===Ye(e)?e:e.assignedSlot||e.parentNode||(Fe(e)?e.host:null)||Ze(e)}function nt(e){return["html","body","#document"].indexOf(Ye(e))>=0?e.ownerDocument.body:$e(e)&&Xe(e)?e:nt(tt(e))}function it(e,t){var n;void 0===t&&(t=[]);var i=nt(e),r=i===(null==(n=e.ownerDocument)?void 0:n.body),s=He(i),o=r?[s].concat(s.visualViewport||[],Xe(i)?i:[]):i,a=t.concat(o);return r?a:a.concat(it(tt(o)))}function rt(e){return["table","td","th"].indexOf(Ye(e))>=0}function st(e){return $e(e)&&"fixed"!==Ke(e).position?e.offsetParent:null}function ot(e){for(var t=He(e),n=st(e);n&&rt(n)&&"static"===Ke(n).position;)n=st(n);return n&&("html"===Ye(n)||"body"===Ye(n)&&"static"===Ke(n).position)?t:n||function(e){var t=/firefox/i.test(je());if(/Trident/i.test(je())&&$e(e)&&"fixed"===Ke(e).position)return null;var n=tt(e);for(Fe(n)&&(n=n.host);$e(n)&&["html","body"].indexOf(Ye(n))<0;){var i=Ke(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||t&&"filter"===i.willChange||t&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(e)||t}var at="top",ct="bottom",lt="right",dt="left",ut="auto",pt=[at,ct,lt,dt],ft="start",ht="end",mt="viewport",_t="popper",gt=pt.reduce((function(e,t){return e.concat([t+"-"+ft,t+"-"+ht])}),[]),vt=[].concat(pt,[ut]).reduce((function(e,t){return e.concat([t,t+"-"+ft,t+"-"+ht])}),[]),bt=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function yt(e){var t=new Map,n=new Set,i=[];function r(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var i=t.get(e);i&&r(i)}})),i.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||r(e)})),i}var kt={placement:"bottom",modifiers:[],strategy:"absolute"};function Pt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function wt(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,i=void 0===n?[]:n,r=t.defaultOptions,s=void 0===r?kt:r;return function(e,t,n){void 0===n&&(n=s);var r,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},kt,s),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},c=[],l=!1,d={state:a,setOptions:function(n){var r="function"==typeof n?n(a.options):n;u(),a.options=Object.assign({},s,a.options,r),a.scrollParents={reference:We(e)?it(e):e.contextElement?it(e.contextElement):[],popper:it(t)};var o,l,p=function(e){var t=yt(e);return bt.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}((o=[].concat(i,a.options.modifiers),l=o.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),Object.keys(l).map((function(e){return l[e]}))));return a.orderedModifiers=p.filter((function(e){return e.enabled})),a.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,i=void 0===n?{}:n,r=e.effect;if("function"==typeof r){var s=r({state:a,name:t,instance:d,options:i});c.push(s||function(){})}})),d.update()},forceUpdate:function(){if(!l){var e=a.elements,t=e.reference,n=e.popper;if(Pt(t,n)){a.rects={reference:Qe(t,ot(n),"fixed"===a.options.strategy),popper:et(n)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach((function(e){return a.modifiersData[e.name]=Object.assign({},e.data)}));for(var i=0;i<a.orderedModifiers.length;i++)if(!0!==a.reset){var r=a.orderedModifiers[i],s=r.fn,o=r.options,c=void 0===o?{}:o,u=r.name;"function"==typeof s&&(a=s({state:a,options:c,name:u,instance:d})||a)}else a.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(e){d.forceUpdate(),e(a)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=void 0,e(r())}))}))),o}),destroy:function(){u(),l=!0}};if(!Pt(e,t))return d;function u(){c.forEach((function(e){return e()})),c=[]}return d.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d}}var Et={passive:!0};function xt(e){return e.split("-")[0]}function St(e){return e.split("-")[1]}function Tt(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Bt(e){var t,n=e.reference,i=e.element,r=e.placement,s=r?xt(r):null,o=r?St(r):null,a=n.x+n.width/2-i.width/2,c=n.y+n.height/2-i.height/2;switch(s){case at:t={x:a,y:n.y-i.height};break;case ct:t={x:a,y:n.y+n.height};break;case lt:t={x:n.x+n.width,y:c};break;case dt:t={x:n.x-i.width,y:c};break;default:t={x:n.x,y:n.y}}var l=s?Tt(s):null;if(null!=l){var d="y"===l?"height":"width";switch(o){case ft:t[l]=t[l]-(n[d]/2-i[d]/2);break;case ht:t[l]=t[l]+(n[d]/2-i[d]/2)}}return t}var Ct={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Lt(e){var t,n=e.popper,i=e.popperRect,r=e.placement,s=e.variation,o=e.offsets,a=e.position,c=e.gpuAcceleration,l=e.adaptive,d=e.roundOffsets,u=e.isFixed,p=o.x,f=void 0===p?0:p,h=o.y,m=void 0===h?0:h,_="function"==typeof d?d({x:f,y:m}):{x:f,y:m};f=_.x,m=_.y;var g=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),b=dt,y=at,k=window;if(l){var P=ot(n),w="clientHeight",E="clientWidth";P===He(n)&&"static"!==Ke(P=Ze(n)).position&&"absolute"===a&&(w="scrollHeight",E="scrollWidth"),(r===at||(r===dt||r===lt)&&s===ht)&&(y=ct,m-=(u&&P===k&&k.visualViewport?k.visualViewport.height:P[w])-i.height,m*=c?1:-1),r!==dt&&(r!==at&&r!==ct||s!==ht)||(b=lt,f-=(u&&P===k&&k.visualViewport?k.visualViewport.width:P[E])-i.width,f*=c?1:-1)}var x,S=Object.assign({position:a},l&&Ct),T=!0===d?function(e,t){var n=e.x,i=e.y,r=t.devicePixelRatio||1;return{x:Ne(n*r)/r||0,y:Ne(i*r)/r||0}}({x:f,y:m},He(n)):{x:f,y:m};return f=T.x,m=T.y,c?Object.assign({},S,((x={})[y]=v?"0":"",x[b]=g?"0":"",x.transform=(k.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",x)):Object.assign({},S,((t={})[y]=v?m+"px":"",t[b]=g?f+"px":"",t.transform="",t))}var At={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},i=t.attributes[e]||{},r=t.elements[e];$e(r)&&Ye(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(e){var t=i[e];!1===t?r.removeAttribute(e):r.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var i=t.elements[e],r=t.attributes[e]||{},s=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});$e(i)&&Ye(i)&&(Object.assign(i.style,s),Object.keys(r).forEach((function(e){i.removeAttribute(e)})))}))}},requires:["computeStyles"]},Dt={left:"right",right:"left",bottom:"top",top:"bottom"};function Mt(e){return e.replace(/left|right|bottom|top/g,(function(e){return Dt[e]}))}var Ot={start:"end",end:"start"};function Rt(e){return e.replace(/start|end/g,(function(e){return Ot[e]}))}function It(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Fe(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Ht(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Wt(e,t,n){return t===mt?Ht(function(e,t){var n=He(e),i=Ze(e),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,c=0;if(r){s=r.width,o=r.height;var l=Ve();(l||!l&&"fixed"===t)&&(a=r.offsetLeft,c=r.offsetTop)}return{width:s,height:o,x:a+Je(e),y:c}}(e,n)):We(t)?function(e,t){var n=Ge(e,!1,"fixed"===t);return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}(t,n):Ht(function(e){var t,n=Ze(e),i=Ue(e),r=null==(t=e.ownerDocument)?void 0:t.body,s=ze(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=ze(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Je(e),c=-i.scrollTop;return"rtl"===Ke(r||n).direction&&(a+=ze(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}(Ze(e)))}function $t(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function Ft(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function zt(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=void 0===i?e.placement:i,s=n.strategy,o=void 0===s?e.strategy:s,a=n.boundary,c=void 0===a?"clippingParents":a,l=n.rootBoundary,d=void 0===l?mt:l,u=n.elementContext,p=void 0===u?_t:u,f=n.altBoundary,h=void 0!==f&&f,m=n.padding,_=void 0===m?0:m,g=$t("number"!=typeof _?_:Ft(_,pt)),v=p===_t?"reference":_t,b=e.rects.popper,y=e.elements[h?v:p],k=function(e,t,n,i){var r="clippingParents"===t?function(e){var t=it(tt(e)),n=["absolute","fixed"].indexOf(Ke(e).position)>=0&&$e(e)?ot(e):e;return We(n)?t.filter((function(e){return We(e)&&It(e,n)&&"body"!==Ye(e)})):[]}(e):[].concat(t),s=[].concat(r,[n]),o=s[0],a=s.reduce((function(t,n){var r=Wt(e,n,i);return t.top=ze(r.top,t.top),t.right=qe(r.right,t.right),t.bottom=qe(r.bottom,t.bottom),t.left=ze(r.left,t.left),t}),Wt(e,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(We(y)?y:y.contextElement||Ze(e.elements.popper),c,d,o),P=Ge(e.elements.reference),w=Bt({reference:P,element:b,strategy:"absolute",placement:r}),E=Ht(Object.assign({},b,w)),x=p===_t?E:P,S={top:k.top-x.top+g.top,bottom:x.bottom-k.bottom+g.bottom,left:k.left-x.left+g.left,right:x.right-k.right+g.right},T=e.modifiersData.offset;if(p===_t&&T){var B=T[r];Object.keys(S).forEach((function(e){var t=[lt,ct].indexOf(e)>=0?1:-1,n=[at,ct].indexOf(e)>=0?"y":"x";S[e]+=B[n]*t}))}return S}function qt(e,t,n){return ze(e,qe(t,n))}function Nt(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function jt(e){return[at,lt,ct,dt].some((function(t){return e[t]>=0}))}var Vt=wt({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,c=He(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&l.forEach((function(e){e.addEventListener("scroll",n.update,Et)})),a&&c.addEventListener("resize",n.update,Et),function(){s&&l.forEach((function(e){e.removeEventListener("scroll",n.update,Et)})),a&&c.removeEventListener("resize",n.update,Et)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Bt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,c=void 0===a||a,l={placement:xt(t.placement),variation:St(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,Lt(Object.assign({},l,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,Lt(Object.assign({},l,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},At,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.offset,s=void 0===r?[0,0]:r,o=vt.reduce((function(e,n){return e[n]=function(e,t,n){var i=xt(e),r=[dt,at].indexOf(i)>=0?-1:1,s="function"==typeof n?n(Object.assign({},t,{placement:e})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[dt,lt].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}(n,t.rects,s),e}),{}),a=o[t.placement],c=a.x,l=a.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=l),t.modifiersData[i]=o}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0===o||o,c=n.fallbackPlacements,l=n.padding,d=n.boundary,u=n.rootBoundary,p=n.altBoundary,f=n.flipVariations,h=void 0===f||f,m=n.allowedAutoPlacements,_=t.options.placement,g=xt(_),v=c||(g!==_&&h?function(e){if(xt(e)===ut)return[];var t=Mt(e);return[Rt(e),t,Rt(t)]}(_):[Mt(_)]),b=[_].concat(v).reduce((function(e,n){return e.concat(xt(n)===ut?function(e,t){void 0===t&&(t={});var n=t,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,l=void 0===c?vt:c,d=St(i),u=d?a?gt:gt.filter((function(e){return St(e)===d})):pt,p=u.filter((function(e){return l.indexOf(e)>=0}));0===p.length&&(p=u);var f=p.reduce((function(t,n){return t[n]=zt(e,{placement:n,boundary:r,rootBoundary:s,padding:o})[xt(n)],t}),{});return Object.keys(f).sort((function(e,t){return f[e]-f[t]}))}(t,{placement:n,boundary:d,rootBoundary:u,padding:l,flipVariations:h,allowedAutoPlacements:m}):n)}),[]),y=t.rects.reference,k=t.rects.popper,P=new Map,w=!0,E=b[0],x=0;x<b.length;x++){var S=b[x],T=xt(S),B=St(S)===ft,C=[at,ct].indexOf(T)>=0,L=C?"width":"height",A=zt(t,{placement:S,boundary:d,rootBoundary:u,altBoundary:p,padding:l}),D=C?B?lt:dt:B?ct:at;y[L]>k[L]&&(D=Mt(D));var M=Mt(D),O=[];if(s&&O.push(A[T]<=0),a&&O.push(A[D]<=0,A[M]<=0),O.every((function(e){return e}))){E=S,w=!1;break}P.set(S,O)}if(w)for(var R=function(e){var t=b.find((function(t){var n=P.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return E=t,"break"},I=h?3:1;I>0&&"break"!==R(I);I--);t.placement!==E&&(t.modifiersData[i]._skip=!0,t.placement=E,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0!==o&&o,c=n.boundary,l=n.rootBoundary,d=n.altBoundary,u=n.padding,p=n.tether,f=void 0===p||p,h=n.tetherOffset,m=void 0===h?0:h,_=zt(t,{boundary:c,rootBoundary:l,padding:u,altBoundary:d}),g=xt(t.placement),v=St(t.placement),b=!v,y=Tt(g),k="x"===y?"y":"x",P=t.modifiersData.popperOffsets,w=t.rects.reference,E=t.rects.popper,x="function"==typeof m?m(Object.assign({},t.rects,{placement:t.placement})):m,S="number"==typeof x?{mainAxis:x,altAxis:x}:Object.assign({mainAxis:0,altAxis:0},x),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,B={x:0,y:0};if(P){if(s){var C,L="y"===y?at:dt,A="y"===y?ct:lt,D="y"===y?"height":"width",M=P[y],O=M+_[L],R=M-_[A],I=f?-E[D]/2:0,H=v===ft?w[D]:E[D],W=v===ft?-E[D]:-w[D],$=t.elements.arrow,F=f&&$?et($):{width:0,height:0},z=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},q=z[L],N=z[A],j=qt(0,w[D],F[D]),V=b?w[D]/2-I-j-q-S.mainAxis:H-j-q-S.mainAxis,G=b?-w[D]/2+I+j+N+S.mainAxis:W+j+N+S.mainAxis,U=t.elements.arrow&&ot(t.elements.arrow),Y=U?"y"===y?U.clientTop||0:U.clientLeft||0:0,Z=null!=(C=null==T?void 0:T[y])?C:0,J=M+G-Z,K=qt(f?qe(O,M+V-Z-Y):O,M,f?ze(R,J):R);P[y]=K,B[y]=K-M}if(a){var X,Q="x"===y?at:dt,ee="x"===y?ct:lt,te=P[k],ne="y"===k?"height":"width",ie=te+_[Q],re=te-_[ee],se=-1!==[at,dt].indexOf(g),oe=null!=(X=null==T?void 0:T[k])?X:0,ae=se?ie:te-w[ne]-E[ne]-oe+S.altAxis,ce=se?te+w[ne]+E[ne]-oe-S.altAxis:re,le=f&&se?function(e,t,n){var i=qt(e,t,n);return i>n?n:i}(ae,te,ce):qt(f?ae:ie,te,f?ce:re);P[k]=le,B[k]=le-te}t.modifiersData[i]=B}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,i=e.name,r=e.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=xt(n.placement),c=Tt(a),l=[dt,lt].indexOf(a)>=0?"height":"width";if(s&&o){var d=function(e,t){return $t("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:Ft(e,pt))}(r.padding,n),u=et(s),p="y"===c?at:dt,f="y"===c?ct:lt,h=n.rects.reference[l]+n.rects.reference[c]-o[c]-n.rects.popper[l],m=o[c]-n.rects.reference[c],_=ot(s),g=_?"y"===c?_.clientHeight||0:_.clientWidth||0:0,v=h/2-m/2,b=d[p],y=g-u[l]-d[f],k=g/2-u[l]/2+v,P=qt(b,k,y),w=c;n.modifiersData[i]=((t={})[w]=P,t.centerOffset=P-k,t)}},effect:function(e){var t=e.state,n=e.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&It(t.elements.popper,i)&&(t.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,i=t.rects.reference,r=t.rects.popper,s=t.modifiersData.preventOverflow,o=zt(t,{elementContext:"reference"}),a=zt(t,{altBoundary:!0}),c=Nt(o,i),l=Nt(a,r,s),d=jt(c),u=jt(l);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}}]}),Gt="tippy-content",Ut="tippy-backdrop",Yt="tippy-arrow",Zt="tippy-svg-arrow",Jt={passive:!0,capture:!0},Kt=function(){return document.body};function Xt(e,t,n){if(Array.isArray(e)){var i=e[t];return null==i?Array.isArray(n)?n[t]:n:i}return e}function Qt(e,t){var n={}.toString.call(e);return 0===n.indexOf("[object")&&n.indexOf(t+"]")>-1}function en(e,t){return"function"==typeof e?e.apply(void 0,t):e}function tn(e,t){return 0===t?e:function(i){clearTimeout(n),n=setTimeout((function(){e(i)}),t)};var n}function nn(e){return[].concat(e)}function rn(e,t){-1===e.indexOf(t)&&e.push(t)}function sn(e){return[].slice.call(e)}function on(e){return Object.keys(e).reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}function an(){return document.createElement("div")}function cn(e){return["Element","Fragment"].some((function(t){return Qt(e,t)}))}function ln(e,t){e.forEach((function(e){e&&(e.style.transitionDuration=t+"ms")}))}function dn(e,t){e.forEach((function(e){e&&e.setAttribute("data-state",t)}))}function un(e,t,n){var i=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(t){e[i](t,n)}))}function pn(e,t){for(var n=t;n;){var i;if(e.contains(n))return!0;n=null==n.getRootNode||null==(i=n.getRootNode())?void 0:i.host}return!1}var fn={isTouch:!1},hn=0;function mn(){fn.isTouch||(fn.isTouch=!0,window.performance&&document.addEventListener("mousemove",_n))}function _n(){var e=performance.now();e-hn<20&&(fn.isTouch=!1,document.removeEventListener("mousemove",_n)),hn=e}function gn(){var e,t=document.activeElement;if((e=t)&&e._tippy&&e._tippy.reference===e){var n=t._tippy;t.blur&&!n.state.isVisible&&t.blur()}}var vn=!("undefined"==typeof window||"undefined"==typeof document||!window.msCrypto),bn=Object.assign({appendTo:Kt,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}),yn=Object.keys(bn);function kn(e){var t=(e.plugins||[]).reduce((function(t,n){var i,r=n.name,s=n.defaultValue;return r&&(t[r]=void 0!==e[r]?e[r]:null!=(i=bn[r])?i:s),t}),{});return Object.assign({},e,t)}function Pn(e,t){var n=Object.assign({},t,{content:en(t.content,[e])},t.ignoreAttributes?{}:function(e,t){return(t?Object.keys(kn(Object.assign({},bn,{plugins:t}))):yn).reduce((function(t,n){var i=(e.getAttribute("data-tippy-"+n)||"").trim();if(!i)return t;if("content"===n)t[n]=i;else try{t[n]=JSON.parse(i)}catch(e){t[n]=i}return t}),{})}(e,t.plugins));return n.aria=Object.assign({},bn.aria,n.aria),n.aria={expanded:"auto"===n.aria.expanded?t.interactive:n.aria.expanded,content:"auto"===n.aria.content?t.interactive?null:"describedby":n.aria.content},n}var wn=function(){return"innerHTML"};function En(e,t){e[wn()]=t}function xn(e){var t=an();return!0===e?t.className=Yt:(t.className=Zt,cn(e)?t.appendChild(e):En(t,e)),t}function Sn(e,t){cn(t.content)?(En(e,""),e.appendChild(t.content)):"function"!=typeof t.content&&(t.allowHTML?En(e,t.content):e.textContent=t.content)}function Tn(e){var t=e.firstElementChild,n=sn(t.children);return{box:t,content:n.find((function(e){return e.classList.contains(Gt)})),arrow:n.find((function(e){return e.classList.contains(Yt)||e.classList.contains(Zt)})),backdrop:n.find((function(e){return e.classList.contains(Ut)}))}}function Bn(e){var t=an(),n=an();n.className="tippy-box",n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var i=an();function r(n,i){var r=Tn(t),s=r.box,o=r.content,a=r.arrow;i.theme?s.setAttribute("data-theme",i.theme):s.removeAttribute("data-theme"),"string"==typeof i.animation?s.setAttribute("data-animation",i.animation):s.removeAttribute("data-animation"),i.inertia?s.setAttribute("data-inertia",""):s.removeAttribute("data-inertia"),s.style.maxWidth="number"==typeof i.maxWidth?i.maxWidth+"px":i.maxWidth,i.role?s.setAttribute("role",i.role):s.removeAttribute("role"),n.content===i.content&&n.allowHTML===i.allowHTML||Sn(o,e.props),i.arrow?a?n.arrow!==i.arrow&&(s.removeChild(a),s.appendChild(xn(i.arrow))):s.appendChild(xn(i.arrow)):a&&s.removeChild(a)}return i.className=Gt,i.setAttribute("data-state","hidden"),Sn(i,e.props),t.appendChild(n),n.appendChild(i),r(e.props,e.props),{popper:t,onUpdate:r}}Bn.$$tippy=!0;var Cn=1,Ln=[],An=[];function Dn(e,t){var n,i,r,s,o,a,c,l,d=Pn(e,Object.assign({},bn,kn(on(t)))),u=!1,p=!1,f=!1,h=!1,m=[],_=tn(U,d.interactiveDebounce),g=Cn++,v=(l=d.plugins).filter((function(e,t){return l.indexOf(e)===t})),b={id:g,reference:e,popper:an(),popperInstance:null,props:d,state:{isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},plugins:v,clearDelayTimeouts:function(){clearTimeout(n),clearTimeout(i),cancelAnimationFrame(r)},setProps:function(t){if(!b.state.isDestroyed){M("onBeforeUpdate",[b,t]),V();var n=b.props,i=Pn(e,Object.assign({},n,on(t),{ignoreAttributes:!0}));b.props=i,j(),n.interactiveDebounce!==i.interactiveDebounce&&(I(),_=tn(U,i.interactiveDebounce)),n.triggerTarget&&!i.triggerTarget?nn(n.triggerTarget).forEach((function(e){e.removeAttribute("aria-expanded")})):i.triggerTarget&&e.removeAttribute("aria-expanded"),R(),D(),P&&P(n,i),b.popperInstance&&(K(),Q().forEach((function(e){requestAnimationFrame(e._tippy.popperInstance.forceUpdate)}))),M("onAfterUpdate",[b,t])}},setContent:function(e){b.setProps({content:e})},show:function(){var e=b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,i=fn.isTouch&&!b.props.touch,r=Xt(b.props.duration,0,bn.duration);if(!(e||t||n||i||B().hasAttribute("disabled")||(M("onShow",[b],!1),!1===b.props.onShow(b)))){if(b.state.isVisible=!0,T()&&(k.style.visibility="visible"),D(),F(),b.state.isMounted||(k.style.transition="none"),T()){var s=L();ln([s.box,s.content],0)}var o,c,l;a=function(){var e;if(b.state.isVisible&&!h){if(h=!0,k.offsetHeight,k.style.transition=b.props.moveTransition,T()&&b.props.animation){var t=L(),n=t.box,i=t.content;ln([n,i],r),dn([n,i],"visible")}O(),R(),rn(An,b),null==(e=b.popperInstance)||e.forceUpdate(),M("onMount",[b]),b.props.animation&&T()&&function(e,t){q(e,(function(){b.state.isShown=!0,M("onShown",[b])}))}(r)}},c=b.props.appendTo,l=B(),(o=b.props.interactive&&c===Kt||"parent"===c?l.parentNode:en(c,[l])).contains(k)||o.appendChild(k),b.state.isMounted=!0,K()}},hide:function(){var e=!b.state.isVisible,t=b.state.isDestroyed,n=!b.state.isEnabled,i=Xt(b.props.duration,1,bn.duration);if(!(e||t||n)&&(M("onHide",[b],!1),!1!==b.props.onHide(b))){if(b.state.isVisible=!1,b.state.isShown=!1,h=!1,u=!1,T()&&(k.style.visibility="hidden"),I(),z(),D(!0),T()){var r=L(),s=r.box,o=r.content;b.props.animation&&(ln([s,o],i),dn([s,o],"hidden"))}O(),R(),b.props.animation?T()&&function(e,t){q(e,(function(){!b.state.isVisible&&k.parentNode&&k.parentNode.contains(k)&&t()}))}(i,b.unmount):b.unmount()}},hideWithInteractivity:function(e){C().addEventListener("mousemove",_),rn(Ln,_),_(e)},enable:function(){b.state.isEnabled=!0},disable:function(){b.hide(),b.state.isEnabled=!1},unmount:function(){b.state.isVisible&&b.hide(),b.state.isMounted&&(X(),Q().forEach((function(e){e._tippy.unmount()})),k.parentNode&&k.parentNode.removeChild(k),An=An.filter((function(e){return e!==b})),b.state.isMounted=!1,M("onHidden",[b]))},destroy:function(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),V(),delete e._tippy,b.state.isDestroyed=!0,M("onDestroy",[b]))}};if(!d.render)return b;var y=d.render(b),k=y.popper,P=y.onUpdate;k.setAttribute("data-tippy-root",""),k.id="tippy-"+b.id,b.popper=k,e._tippy=b,k._tippy=b;var w=v.map((function(e){return e.fn(b)})),E=e.hasAttribute("aria-expanded");return j(),R(),D(),M("onCreate",[b]),d.showOnCreate&&ee(),k.addEventListener("mouseenter",(function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()})),k.addEventListener("mouseleave",(function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&C().addEventListener("mousemove",_)})),b;function x(){var e=b.props.touch;return Array.isArray(e)?e:[e,0]}function S(){return"hold"===x()[0]}function T(){var e;return!(null==(e=b.props.render)||!e.$$tippy)}function B(){return c||e}function C(){var e,t,n=B().parentNode;return n?null!=(t=nn(n)[0])&&null!=(e=t.ownerDocument)&&e.body?t.ownerDocument:document:document}function L(){return Tn(k)}function A(e){return b.state.isMounted&&!b.state.isVisible||fn.isTouch||s&&"focus"===s.type?0:Xt(b.props.delay,e?0:1,bn.delay)}function D(e){void 0===e&&(e=!1),k.style.pointerEvents=b.props.interactive&&!e?"":"none",k.style.zIndex=""+b.props.zIndex}function M(e,t,n){var i;void 0===n&&(n=!0),w.forEach((function(n){n[e]&&n[e].apply(n,t)})),n&&(i=b.props)[e].apply(i,t)}function O(){var t=b.props.aria;if(t.content){var n="aria-"+t.content,i=k.id;nn(b.props.triggerTarget||e).forEach((function(e){var t=e.getAttribute(n);if(b.state.isVisible)e.setAttribute(n,t?t+" "+i:i);else{var r=t&&t.replace(i,"").trim();r?e.setAttribute(n,r):e.removeAttribute(n)}}))}}function R(){!E&&b.props.aria.expanded&&nn(b.props.triggerTarget||e).forEach((function(e){b.props.interactive?e.setAttribute("aria-expanded",b.state.isVisible&&e===B()?"true":"false"):e.removeAttribute("aria-expanded")}))}function I(){C().removeEventListener("mousemove",_),Ln=Ln.filter((function(e){return e!==_}))}function H(t){if(!fn.isTouch||!f&&"mousedown"!==t.type){var n=t.composedPath&&t.composedPath()[0]||t.target;if(!b.props.interactive||!pn(k,n)){if(nn(b.props.triggerTarget||e).some((function(e){return pn(e,n)}))){if(fn.isTouch)return;if(b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else M("onClickOutside",[b,t]);!0===b.props.hideOnClick&&(b.clearDelayTimeouts(),b.hide(),p=!0,setTimeout((function(){p=!1})),b.state.isMounted||z())}}}function W(){f=!0}function $(){f=!1}function F(){var e=C();e.addEventListener("mousedown",H,!0),e.addEventListener("touchend",H,Jt),e.addEventListener("touchstart",$,Jt),e.addEventListener("touchmove",W,Jt)}function z(){var e=C();e.removeEventListener("mousedown",H,!0),e.removeEventListener("touchend",H,Jt),e.removeEventListener("touchstart",$,Jt),e.removeEventListener("touchmove",W,Jt)}function q(e,t){var n=L().box;function i(e){e.target===n&&(un(n,"remove",i),t())}if(0===e)return t();un(n,"remove",o),un(n,"add",i),o=i}function N(t,n,i){void 0===i&&(i=!1),nn(b.props.triggerTarget||e).forEach((function(e){e.addEventListener(t,n,i),m.push({node:e,eventType:t,handler:n,options:i})}))}function j(){var e;S()&&(N("touchstart",G,{passive:!0}),N("touchend",Y,{passive:!0})),(e=b.props.trigger,e.split(/\s+/).filter(Boolean)).forEach((function(e){if("manual"!==e)switch(N(e,G),e){case"mouseenter":N("mouseleave",Y);break;case"focus":N(vn?"focusout":"blur",Z);break;case"focusin":N("focusout",Z)}}))}function V(){m.forEach((function(e){var t=e.node,n=e.eventType,i=e.handler,r=e.options;t.removeEventListener(n,i,r)})),m=[]}function G(e){var t,n=!1;if(b.state.isEnabled&&!J(e)&&!p){var i="focus"===(null==(t=s)?void 0:t.type);s=e,c=e.currentTarget,R(),!b.state.isVisible&&Qt(e,"MouseEvent")&&Ln.forEach((function(t){return t(e)})),"click"===e.type&&(b.props.trigger.indexOf("mouseenter")<0||u)&&!1!==b.props.hideOnClick&&b.state.isVisible?n=!0:ee(e),"click"===e.type&&(u=!n),n&&!i&&te(e)}}function U(e){var t=e.target,n=B().contains(t)||k.contains(t);if("mousemove"!==e.type||!n){var i=Q().concat(k).map((function(e){var t,n=null==(t=e._tippy.popperInstance)?void 0:t.state;return n?{popperRect:e.getBoundingClientRect(),popperState:n,props:d}:null})).filter(Boolean);(function(e,t){var n=t.clientX,i=t.clientY;return e.every((function(e){var t=e.popperRect,r=e.popperState,s=e.props.interactiveBorder,o=r.placement.split("-")[0],a=r.modifiersData.offset;if(!a)return!0;var c="bottom"===o?a.top.y:0,l="top"===o?a.bottom.y:0,d="right"===o?a.left.x:0,u="left"===o?a.right.x:0,p=t.top-i+c>s,f=i-t.bottom-l>s,h=t.left-n+d>s,m=n-t.right-u>s;return p||f||h||m}))})(i,e)&&(I(),te(e))}}function Y(e){J(e)||b.props.trigger.indexOf("click")>=0&&u||(b.props.interactive?b.hideWithInteractivity(e):te(e))}function Z(e){b.props.trigger.indexOf("focusin")<0&&e.target!==B()||b.props.interactive&&e.relatedTarget&&k.contains(e.relatedTarget)||te(e)}function J(e){return!!fn.isTouch&&S()!==e.type.indexOf("touch")>=0}function K(){X();var t=b.props,n=t.popperOptions,i=t.placement,r=t.offset,s=t.getReferenceClientRect,o=t.moveTransition,c=T()?Tn(k).arrow:null,l=s?{getBoundingClientRect:s,contextElement:s.contextElement||B()}:e,d=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!o}},{name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;if(T()){var n=L().box;["placement","reference-hidden","escaped"].forEach((function(e){"placement"===e?n.setAttribute("data-placement",t.placement):t.attributes.popper["data-popper-"+e]?n.setAttribute("data-"+e,""):n.removeAttribute("data-"+e)})),t.attributes.popper={}}}}];T()&&c&&d.push({name:"arrow",options:{element:c,padding:3}}),d.push.apply(d,(null==n?void 0:n.modifiers)||[]),b.popperInstance=Vt(l,k,Object.assign({},n,{placement:i,onFirstUpdate:a,modifiers:d}))}function X(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Q(){return sn(k.querySelectorAll("[data-tippy-root]"))}function ee(e){b.clearDelayTimeouts(),e&&M("onTrigger",[b,e]),F();var t=A(!0),i=x(),r=i[0],s=i[1];fn.isTouch&&"hold"===r&&s&&(t=s),t?n=setTimeout((function(){b.show()}),t):b.show()}function te(e){if(b.clearDelayTimeouts(),M("onUntrigger",[b,e]),b.state.isVisible){if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(e.type)>=0&&u)){var t=A(!1);t?i=setTimeout((function(){b.state.isVisible&&b.hide()}),t):r=requestAnimationFrame((function(){b.hide()}))}}else z()}}function Mn(e,t){void 0===t&&(t={});var n=bn.plugins.concat(t.plugins||[]);document.addEventListener("touchstart",mn,Jt),window.addEventListener("blur",gn);var i,r=Object.assign({},t,{plugins:n}),s=(i=e,cn(i)?[i]:function(e){return Qt(e,"NodeList")}(i)?sn(i):Array.isArray(i)?i:sn(document.querySelectorAll(i))).reduce((function(e,t){var n=t&&Dn(t,r);return n&&e.push(n),e}),[]);return cn(e)?s[0]:s}Mn.defaultProps=bn,Mn.setDefaultProps=function(e){Object.keys(e).forEach((function(t){bn[t]=e[t]}))},Mn.currentInput=fn,Object.assign({},At,{effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow)}}),Mn.setDefaultProps({render:Bn});var On,Rn=Mn;!function(e){e.General="General",e.Weapon_Skill="Weapon Skill",e.Ballistic_Skill="Ballistic Skill",e.Strength="Strength",e.Toughness="Toughness",e.Agility="Agility",e.Intelligence="Intelligence",e.Perception="Perception",e.Willpower="Willpower",e.Fellowship="Fellowship",e.Offence="Offence",e.Finesse="Finesse",e.Defence="Defence",e.Psyker="Psyker",e.Tech="Tech",e.Knowledge="Knowledge",e.Leadership="Leadership",e.Fieldcraft="Fieldcraft",e.Social="Social"}(On||(On={}));class In{characteristic;amount;constructor(e,t){this.characteristic=e,this.amount=t}}class Hn{skill;choices;amount;constructor(e,t,n){this.skill=e,this.choices=n,this.amount=t}}class Wn{talent;choices;constructor(e,t){this.talent=e,this.choices=t}}class $n{class=null;matches=0;constructor(e,t){this.class=e,this.matches=t}}class Fn{role=null;matches=0;constructor(e,t){this.role=e,this.matches=t}}class zn{world=null;matches=0;constructor(e,t){this.world=e,this.matches=t}}class qn{background=null;matches=0;constructor(e,t){this.background=e,this.matches=t}}class Nn{wishlist;skill_wishlist;characteristic_wishlist;skip0CbChecked;worldSelected;classSelected;backgroundSelected;roleSelected;extraAptitudesSelected;aptitudesWishlist;constructor(){this.wishlist="",this.skill_wishlist="",this.characteristic_wishlist="",this.aptitudesWishlist=[],this.skip0CbChecked=!1,this.worldSelected="",this.classSelected="",this.backgroundSelected="",this.roleSelected="",this.extraAptitudesSelected=[]}}class jn{text="";skillPick=null;characteristicPick=null;talentPick=null;and=[];or=[];constructor(e){this.text=e}}const Vn=["animate__animated","animate__faster","animate__flash"];function Gn(e){const t=document.getElementById(e);if(!t)return;const n=t.getBoundingClientRect().top+window.scrollY-3;window.scrollTo({top:n,behavior:"auto"}),t.classList.add(...Vn),t.addEventListener("animationend",(()=>t.classList.remove(...Vn)))}const Un=window||e.g;Un.$scrollToAnchor=Gn,Un.$tippy=Rn,(new class{data;configData=new Nn;selectedAptitudes=[];source="ow";urlParams=null;dollar;getUrlParam(e){return this.urlParams||(this.urlParams=new URLSearchParams(window.location.search)),this.urlParams?.get(e)}start(){const e=this.getUrlParam("source")||"ow",t="true"===this.getUrlParam("reset"),n=t?null:this.getUrlParam("cfg");fetch(`assets/w40k-${e}.json`).then((e=>e.json())).then((i=>this.$start(i,e,n,t)))}randomStr(e){let t="";let n=0;for(;n<e;)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random())),n+=1;return t}createPopOver(e,t){Rn("#"+e,{content:`${t}`,allowHTML:!0,theme:"light-border",arrow:!0,trigger:"click",interactive:!0,animation:"scale"})}$start(e,t,n,i){this.data=e,this.data.talents.forEach((e=>e.expandsTo=[])),this.source=t,this.createSkillRanksHelp(),this.buildPrerequisitesTree(),this.loadConfigData(i,t,n),this.createClassSelectContainer(),this.createWorldSelectContainer(),this.createBackgroundSelectContainer(),this.createRoleSelectContainer(),this.createAptitudeSelect(),this.createAptitudeWishlistSelect(),this.createSkipZeroMatchesCheckbox();{const e=this.createCharacteristicWishlist();this.createExportCharacteristic(),this.createExportCharacteristicWishlist(),this.createCharacteristicWishlistClear(e),this.createCharacteristicWishlistToggle(e)}{const e=this.createSkillWishlist();this.createExportSkill(),this.createExportSkillWishlist(),this.createSkillWishlistClear(e),this.createSkillWishlistToggle(e)}{const e=this.createTalentWishlist();this.createExportTalent(),this.createExportTalentWishlist(),this.createTalentWishlistClear(e),this.createTalentWishlistToggle(e)}this.createExportAll(),this.createSelectPicker("._selectpicker"),this.rebuildTables(null),this.styleAptitudeMatches(null,e),this.createResetLink()}createSkillRanksHelp(){this.createPopOver("skillRanksHelp",'<table>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th colspan="2"><u>Rank</u></th>\n\t\t\t\t\t\t<th><u>Bonus</u></th>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr><td style="padding-right:0.5em">0</td><td>Untrained</td><td style=\'text-align: right;\'>-20</td></tr>\n\t\t\t\t\t<tr><td style="padding-right:0.5em">1</td><td>Known</td><td style=\'text-align: right;\'>0</td></tr>\n\t\t\t\t\t<tr><td style="padding-right:0.5em">2</td><td>Trained</td><td style=\'text-align: right;\'>+10</td></tr>\n\t\t\t\t\t<tr><td style="padding-right:0.5em">3</td><td>Experienced</td><td style=\'text-align: right;\'>+20</td></tr>\n\t\t\t\t\t<tr><td style="padding-right:0.5em">4</td><td>Veteran</td><td style=\'text-align: right;\'>+30</div></tr>\n\t\t\t\t</table>')}buildPrerequisitesTree(){for(let e=0;e<this.data.talents.length;e++){const t=this.data.talents[e];this.buildPrerequisitesTree$(t)}}noPrerequisitesTalent(e){return this.noPrerequisitesText(e.prerequisites)}noPrerequisitesText(e){return"-"===e||"—"===e}createSelectPicker(e){$(e).selectpicker()}loadConfigData(e,t,n){if(e)return;const i=localStorage.getItem("w40k-data-config-"+t);if(n)if(n.startsWith("%7B")||n.startsWith("{"))try{const e=JSON.parse(n);console.log(null!=e.skip0CbChecked),this.configData=e,console.log("load-json",n)}catch(e){console.error("ERROR logged in load-json: incorrect data:",n,e)}else try{const e=Ie(new Int8Array(function(e,t){for(var n,i,r,s=e.replace(/[^A-Za-z0-9\+\/]/g,""),o=s.length,a=3*o+1>>>2,c=new Uint8Array(a),l=0,d=0,u=0;u<o;u++)if(i=3&u,l|=((r=s.charCodeAt(u))>64&&r<91?r-65:r>96&&r<123?r-71:r>47&&r<58?r+4:43===r?62:47===r?63:0)<<18-6*i,3===i||o-u==1){for(n=0;n<3&&d<a;n++,d++)c[d]=l>>>(16>>>n&24)&255;l=0}return c}(decodeURIComponent(n).replace(/-/g,"+").replace(/_/g,"/"))));this.configData=JSON.parse(e),console.log("load-compressed",e)}catch(e){console.error("ERROR logged in load-compressed: incorrect data:",n,e)}else if(i)try{const e=JSON.parse(i);console.log(null!=e.skip0CbChecked),this.configData=e,console.log("load-plain",i)}catch(e){console.error("ERROR logged in load-plain: incorrect data:",i,e)}}createCharacteristicWishlistClear(e){document.getElementById("characteristic_wishlist_clear").addEventListener("click",(t=>{e.value="",this.rebuildTables(t)}))}createCharacteristicWishlistToggle(e){const t=document.getElementById("characteristic_wishlist_toggle");t.addEventListener("change",(n=>{e.readOnly=!t.checked,this.rebuildTables(n)}))}createSkillWishlistClear(e){document.getElementById("skill_wishlist_clear").addEventListener("click",(t=>{e.value="",this.rebuildTables(t)}))}createSkillWishlistToggle(e){const t=document.getElementById("skill_wishlist_toggle");t.addEventListener("change",(n=>{e.readOnly=!t.checked,this.rebuildTables(n)}))}createTalentWishlistClear(e){document.getElementById("wishlist_clear").addEventListener("click",(t=>{e.value="",this.rebuildTables(t)}))}createTalentWishlistToggle(e){const t=document.getElementById("talent_wishlist_toggle");t.addEventListener("change",(n=>{e.readOnly=!t.checked,this.rebuildTables(n)}))}createExportAll(){document.getElementById("export_all").addEventListener("click",(e=>this.exportAllTableToExcelDef("characteristic","skill","talent")))}createExportTalentWishlist(){document.getElementById("export_talent_wishlist").addEventListener("click",(e=>this.copyWishlistToClipboard("talent",3)))}createExportSkillWishlist(){document.getElementById("export_skill_wishlist").addEventListener("click",(e=>this.copyWishlistToClipboard("skill",2)))}createExportCharacteristicWishlist(){document.getElementById("export_characteristic_wishlist").addEventListener("click",(e=>this.copyWishlistToClipboard("characteristic",2)))}createExportTalent(){document.getElementById("export_talent").addEventListener("click",(e=>this.copyTableDivToClipboard("talent")))}createExportSkill(){document.getElementById("export_skill").addEventListener("click",(e=>this.copyTableDivToClipboard("skill")))}createExportCharacteristic(){document.getElementById("export_characteristic").addEventListener("click",(e=>this.copyTableDivToClipboard("characteristic")))}createTalentWishlist(){const e=document.getElementById("wishlist");return e.value=this.configData.wishlist,e.addEventListener("change",(e=>this.rebuildTables(e))),e}createSkillWishlist(){const e=document.getElementById("skill_wishlist");return e.value=this.configData.skill_wishlist,e.addEventListener("change",(e=>this.rebuildTables(e))),e}createCharacteristicWishlist(){const e=document.getElementById("characteristic_wishlist");return e.value=this.configData.characteristic_wishlist,e.addEventListener("change",(e=>this.rebuildTables(e))),e}createSkipZeroMatchesCheckbox(){const e=document.getElementById("skip0Cb");e.checked=this.configData.skip0CbChecked,e.addEventListener("change",(e=>this.rebuildTables(e)))}createAptitudeWishlistSelect(){const e=document.getElementById("aptitudeWishlistSelect");for(let t=0;t<this.data.optional.length;t++){const n=document.createElement("option");n.text=this.data.optional[t],n.value=this.data.optional[t],this.configData.aptitudesWishlist&&this.configData.aptitudesWishlist.includes(this.data.optional[t])&&(n.selected=!0),e.add(n)}e.addEventListener("change",(e=>{this.logMatchingClasses(e,this.data),this.logMatchingWorlds(e,this.data),this.logMatchingBackgrounds(e,this.data),this.logMatchingRoles(e,this.data),this.styleAptitudeMatches(e,this.data)}))}createAptitudeSelect(){const e=document.getElementById("aptitudeSelect");for(let t=0;t<this.data.optional.length;t++){const n=document.createElement("option");n.text=this.data.optional[t],n.value=this.data.optional[t],this.configData.extraAptitudesSelected&&this.configData.extraAptitudesSelected.includes(this.data.optional[t])&&(n.selected=!0),e.add(n)}e.addEventListener("change",(e=>this.rebuildTables(e)))}createRoleSelectContainer(){const e=document.getElementById("roleSelectContainer");if(this.data.roles&&this.data.roles.length>0){const e=document.getElementById("roleSelect");{const t=document.createElement("option");t.text="None",e.add(t)}for(let t=0;t<this.data.roles.length;t++){const n=document.createElement("option"),i=this.data.roles[t].aptitudes,{aptitudesToText:r,aptitudesToHtml:s}=this.aptitudesToTextAndHtml(i);n.text=`${this.data.roles[t].role} (${r.trim()})`,n.setAttribute("data-content",this.data.roles[t].role+" "+s),n.value=this.data.roles[t].role,this.configData.roleSelected&&this.configData.roleSelected==this.data.roles[t].role&&(n.selected=!0),e.add(n)}e.addEventListener("change",(e=>this.rebuildTables(e)))}else e.style.display="none"}createBackgroundSelectContainer(){const e=document.getElementById("backgroundSelectContainer");if(this.data.backgrounds&&this.data.backgrounds.length>0){const e=document.getElementById("backgroundSelect");{const t=document.createElement("option");t.text="None",e.add(t)}for(let t=0;t<this.data.backgrounds.length;t++){const n=document.createElement("option");n.text=`${this.data.backgrounds[t].background} (${this.data.backgrounds[t].aptitude})`,n.setAttribute("data-content",`${this.data.backgrounds[t].background} <span class='badge badge-pill badge-secondary ${this.data.backgrounds[t].aptitude.replace(" ","_")}'>${this.data.backgrounds[t].aptitude}</span>`),n.value=this.data.backgrounds[t].background,this.configData.backgroundSelected&&this.configData.backgroundSelected==this.data.backgrounds[t].background&&(n.selected=!0),e.add(n)}e.addEventListener("change",(e=>this.rebuildTables(e)))}else e.style.display="none"}createWorldSelectContainer(){const e=document.getElementById("worldSelectContainer");if(this.data.worlds&&this.data.worlds.length>0){const e=document.getElementById("worldSelect");{const t=document.createElement("option");t.text="None",e.add(t)}for(let t=0;t<this.data.worlds.length;t++){const n=document.createElement("option");n.text=this.data.worlds[t].world+" ("+this.data.worlds[t].aptitude+")",n.setAttribute("data-content",`${this.data.worlds[t].world} <span class='badge badge-pill badge-secondary ${this.data.worlds[t].aptitude.replace(" ","_")}'>${this.data.worlds[t].aptitude}</span>`),n.value=this.data.worlds[t].world,this.configData.worldSelected&&this.configData.worldSelected==this.data.worlds[t].world&&(n.selected=!0),e.add(n)}e.addEventListener("change",(e=>this.rebuildTables(e)))}else e.style.display="none"}createClassSelectContainer(){const e=document.getElementById("classSelectContainer");if(this.data.classes&&this.data.classes.length>0){const e=document.getElementById("classSelect");{const t=document.createElement("option");t.text="None",e.add(t)}for(let t=0;t<this.data.classes.length;t++){const n=document.createElement("option"),i=this.data.classes[t].aptitudes,{aptitudesToText:r,aptitudesToHtml:s}=this.aptitudesToTextAndHtml(i);n.text=this.data.classes[t].class+" ("+r.trim()+")",n.setAttribute("data-content",`${this.data.classes[t].class} ${s}`),n.value=this.data.classes[t].class,this.configData.classSelected&&this.configData.classSelected==this.data.classes[t].class&&(n.selected=!0),e.add(n)}e.addEventListener("change",(e=>this.rebuildTables(e)))}else e.style.display="none"}resolvePrerequisiteText(e,t){return"-"===t.text||"—"===t.text?null:(this.data.talents.forEach((n=>{const i=new RegExp("^"+n.talent+" \\((.+)\\)$","i");if(i.test(t.text)){const r=t.text.match(i)[1];t.talentPick=new Wn(n,r.split(",").map((e=>e.trim()))),e.expandsTo.push(n)}else n.talent.toLowerCase()==t.text.toLowerCase()&&(t.talentPick=new Wn(n),e.expandsTo.push(n))})),this.data.characteristic.forEach((e=>{const n=new RegExp("^"+e.name+" (\\d+)$","i");if(n.test(t.text)){const i=parseInt(t.text.match(n)[1]);t.characteristicPick=new In(e,i)}})),this.data.skills.forEach((e=>{const n=new RegExp("^"+e.name+" \\((.+)\\) \\+(\\d+)$","i"),i=new RegExp("^"+e.name+" \\+(\\d+)$","i");if(n.test(t.text)){const i=parseInt(t.text.match(n)[2]),r=t.text.match(n)[1];t.skillPick=new Hn(e,i,r.split(",").map((e=>e.trim())))}else if(i.test(t.text)){const n=parseInt(t.text.match(i)[1]);t.skillPick=new Hn(e,n)}})),t)}aptitudesToTextAndHtml(e){let t="",n="";for(let i=0;i<e.length;i++)t+=e[i],n+=`<span class='badge badge-pill badge-secondary ${e[i].replace(" ","_")}'>${e[i]}</span>`,i<e.length-1&&(t+=", ");return{aptitudesToText:t,aptitudesToHtml:n}}rebuildTables(e){const t=this.rebuildTalentWishlist(),n=this.rebuildSkillWishlist(),i=this.rebuildCharacteristicWishlist();this.selectedAptitudes=[],this.selectedAptitudes.push(this.data.free);const r=this.rebuildDuplicateAptitudes();this.rebuildBackgroundSelect(r),this.rebuildAptitudeSelect(r);const s=this.rebuildSkipZeroMatches();this.rebuildTablesCharacteristics(i,s),this.rebuildTablesTalents(t,s),this.rebuildTablesSkills(n,s),$("[title]:not(.dropdown-toggle)").tooltip(),this.save()}rebuildTablesSkills(e,t){const n=document.getElementById("skill");n.innerHTML="";const i=this.data.skills.sort(((e,t)=>{let n=0;this.selectedAptitudes.includes(e.aptitudes[0])&&n++,this.selectedAptitudes.includes(e.aptitudes[1])&&n++;let i=0;return this.selectedAptitudes.includes(t.aptitudes[0])&&i++,this.selectedAptitudes.includes(t.aptitudes[1])&&i++,i-n}));for(let r=0;r<i.length;r++){if(0!=e.length&&!e.includes(i[r].name.toLowerCase().trim()))continue;const s=document.createElement("div"),o=document.createElement("div");let a=!1;for(let e=0;e<this.data.costs.length;e++)if("skill"===this.data.costs[e].type){let n=0;this.selectedAptitudes.includes(i[r].aptitudes[0])&&n++,this.selectedAptitudes.includes(i[r].aptitudes[1])&&n++,a=this.calcSkipAndSetMatchCount(s,e,n,o,t,a)}if(a)continue;const c=document.createElement("div");n.appendChild(c),c.appendChild(s),c.appendChild(o);const l=document.createElement("div");l.innerHTML=i[r].name,c.appendChild(l);for(let e=0;e<i[r].aptitudes.length;e++){const t=document.createElement("div");t.innerHTML=i[r].aptitudes[e],this.selectedAptitudes.includes(i[r].aptitudes[e])&&t.classList.add("m2"),c.appendChild(t)}}}rebuildTablesTalents(e,t){const n=document.getElementById("talent");n.innerHTML="";const i=this.data.talents.sort(((e,t)=>{let n=0;this.selectedAptitudes.includes(e.apt1)&&n++,this.selectedAptitudes.includes(e.apt2)&&n++;let i=0;return this.selectedAptitudes.includes(t.apt1)&&i++,this.selectedAptitudes.includes(t.apt2)&&i++,n===i?e.tier-t.tier:i-n}));for(let r=0;r<i.length;r++){if(0!=e.length&&!e.includes(i[r].talent.toLowerCase().trim()))continue;const s=document.createElement("div");s.setAttribute("data-export","true");const o=document.createElement("div");o.setAttribute("data-export","true");let a=!1;for(let e=0;e<this.data.costs.length;e++)if("talent"===this.data.costs[e].type){let n=0;this.selectedAptitudes.includes(i[r].apt1)&&n++,this.selectedAptitudes.includes(i[r].apt2)&&n++,s.innerHTML=""+this.data.costs[e].cost[2-n][i[r].tier-1],s.classList.add("m"+n),o.innerHTML=""+n,o.classList.add("m"+n),0===n&&t&&(a=!0)}if(a)continue;const c=document.createElement("div");n.appendChild(c),c.appendChild(s),c.appendChild(o);const l=document.createElement("div");l.setAttribute("data-export","true"),l.innerHTML="T"+i[r].tier,c.appendChild(l);const d=document.createElement("div");d.setAttribute("data-export","true"),d.innerHTML=i[r].talent,c.appendChild(d),d.title=i[r].benefit,d.id=i[r].talent,i[r].ref&&(d.title+=" ( "+i[r].ref.replace("PG","").trim()+" )");const u=document.createElement("div");u.setAttribute("data-export","true"),u.innerHTML=i[r].apt1,c.appendChild(u),this.selectedAptitudes.includes(i[r].apt1)&&u.classList.add("m2");const p=document.createElement("div");p.setAttribute("data-export","true"),p.innerHTML=i[r].apt2,c.appendChild(p),this.selectedAptitudes.includes(i[r].apt2)&&p.classList.add("m2");const f=document.createElement("div");f.setAttribute("data-export",i[r].prerequisites),this.replacePrerequisites(i[r],f,i[r].prerequisites),c.appendChild(f);const h=document.createElement("div");h.setAttribute("data-export","true"),h.innerHTML=i[r].benefit,h.style.display="none",c.appendChild(h);const m=document.createElement("div");m.setAttribute("data-export","false"),c.appendChild(m);const _=this.prerequisitesAsTree(i[r],document.createElement("div")),g=this.prerequisitesAsList(i[r],document.createElement("div")),v=this.expandsToAsList(i[r],document.createElement("div"));let b=`<br><h5>${i[r].talent}</h5><div class="text-muted">${i[r].benefit}</div><hr><span class='tiny-ul'>`;_.innerText.length>0&&(_.innerHTML==g.innerHTML?b+=`<h6>Prerequisites</h6>${_.innerHTML}<hr>`:b+=`<h6>Prerequisite Tree</h6>${_.innerHTML}<hr>`),g.innerText.length>0&&(_.innerHTML==g.innerHTML||(b+=`<h6>Prerequisite List</h6>${g.innerHTML}<hr>`)),v.innerText.length>0&&(b+=`<h6>Expands To</h6>${v.innerHTML}<hr>`),b+="</span>";const y="popId_"+i[r].talent.replace(/[^a-zA-Z0-9]/g,"_");m.innerHTML=`<button id="${y}" class="unstyled-button"><i class='icon-as-button fa-regular fa-eye'></i></button>`,this.createPopOver(y,b)}}rebuildSkipZeroMatches(){const e=document.getElementById("skip0Cb");return this.configData.skip0CbChecked=e.checked,e.checked}rebuildTablesCharacteristics(e,t){const n=document.getElementById("characteristic");n.innerHTML="";const i=this.data.characteristic.sort(((e,t)=>{let n=0;this.selectedAptitudes.includes(e.name)&&n++,this.selectedAptitudes.includes(e.aptitude)&&n++;let i=0;return this.selectedAptitudes.includes(t.name)&&i++,this.selectedAptitudes.includes(t.aptitude)&&i++,i-n}));for(let r=0;r<i.length;r++){if(0!=e.length&&!e.includes(i[r].name.toLowerCase().trim()))continue;const s=document.createElement("div"),o=document.createElement("div");let a=!1;for(let e=0;e<this.data.costs.length;e++)if("characteristic"===this.data.costs[e].type){let n=0;this.selectedAptitudes.includes(i[r].name)&&n++,this.selectedAptitudes.includes(i[r].aptitude)&&n++,a=this.calcSkipAndSetMatchCount(s,e,n,o,t,a)}if(a)continue;const c=document.createElement("div");n.appendChild(c),c.appendChild(s),c.appendChild(o);const l=document.createElement("div");l.innerHTML=i[r].name,this.selectedAptitudes.includes(i[r].name)&&l.classList.add("m2"),c.appendChild(l);const d=document.createElement("div");d.innerHTML=i[r].aptitude,this.selectedAptitudes.includes(i[r].aptitude)&&d.classList.add("m2"),c.appendChild(d)}}rebuildAptitudeSelect(e){const t=document.getElementById("aptitudeSelect");if(this.configData.extraAptitudesSelected=[],t.selectedIndex>=0){const n=t.selectedOptions;for(let t=0;t<n.length;t++){const i=this.data.optional[n[t].index];this.configData.extraAptitudesSelected.push(i),this.selectedAptitudes.includes(i)?e.push(i):this.selectedAptitudes.push(i)}}const n=document.getElementById("selectedAptitudes");n.innerHTML="";for(let e=0;e<this.selectedAptitudes.length;e++)n.innerHTML+=`<span class='badge badge-pill badge-secondary ${this.selectedAptitudes[e].replace(" ","_")}'>${this.selectedAptitudes[e]}</span>&nbsp;`;for(let t=0;t<e.length;t++)n.innerHTML+=`<span class='badge badge-pill badge-danger'>${e[t]} (duplicate)</span>`}rebuildBackgroundSelect(e){const t=document.getElementById("backgroundSelect");if(t.selectedIndex>0){const n=this.data.backgrounds[t.selectedIndex-1],i=n.aptitude;this.configData.backgroundSelected=n.background,this.selectedAptitudes.includes(i)?e.push(i):this.selectedAptitudes.push(i)}else this.configData.backgroundSelected=""}rebuildDuplicateAptitudes(){const e=[],t=document.getElementById("classSelect");if(t.selectedIndex>0){const n=this.data.classes[t.selectedIndex-1],i=n.aptitudes;this.configData.classSelected=n.class;for(let t=0;t<i.length;t++)this.selectedAptitudes.includes(i[t])?e.push(i[t]):this.selectedAptitudes.push(i[t])}else this.configData.classSelected="";const n=document.getElementById("worldSelect");if(n.selectedIndex>0){const t=this.data.worlds[n.selectedIndex-1],i=t.aptitude;this.configData.worldSelected=t.world,this.selectedAptitudes.includes(i)?e.push(i):this.selectedAptitudes.push(i)}else this.configData.worldSelected="";const i=document.getElementById("roleSelect");if(i.selectedIndex>0){const t=this.data.roles[i.selectedIndex-1],n=t.aptitudes;this.configData.roleSelected=t.role;for(let t=0;t<n.length;t++)this.selectedAptitudes.includes(n[t])?e.push(n[t]):this.selectedAptitudes.push(n[t])}else this.configData.roleSelected="";return e}rebuildCharacteristicWishlist(){const e=document.getElementById("characteristic_wishlist");if(e.readOnly)return[];this.configData.characteristic_wishlist=e.value;const t=e.value.split("\n");for(let e=0;e<t.length;e++)""===t[e]&&(t.splice(e,1),e--);for(let e=0;e<t.length;e++)t[e]=t[e].toLowerCase().trim();return t}rebuildSkillWishlist(){const e=document.getElementById("skill_wishlist");if(e.readOnly)return[];this.configData.skill_wishlist=e.value;const t=e.value.split("\n");for(let e=0;e<t.length;e++)""===t[e]&&(t.splice(e,1),e--);for(let e=0;e<t.length;e++)t[e]=t[e].toLowerCase().trim();return t}rebuildTalentWishlist(){const e=document.getElementById("wishlist");if(e.readOnly)return[];this.configData.wishlist=e.value;const t=e.value.split("\n");for(let e=0;e<t.length;e++)""===t[e]&&(t.splice(e,1),e--);for(let e=0;e<t.length;e++)t[e]=t[e].toLowerCase().trim();return t}replacePrerequisites(e,t,n){if("—"==n||"-"==n){const e=document.createElement("span");return e.innerHTML="—",t.appendChild(e),!1}const i=document.createElement("ul");let r=!1;const s=this.splitPrerequisitesToAnd(n);for(let e=0;e<s.length;e++){const t=s[e].trim(),n=document.createElement("li"),o=t.toLowerCase(),a=[],c=[];if(this.data.talents.forEach((e=>{const t=o.indexOf(e.talent.toLowerCase());t>=0&&!c.includes(e.talent)&&(c.push(e.talent),a.push({from:t,to:e.talent.length,talent:e}))})),a.length>0){a.sort(((e,t)=>e.from-t.from));let e=0;for(;e<t.length;)if(a.length>0&&a[0].from==e){const t=document.createElement("span");t.classList.add("jump-to-anchor"),t.setAttribute("title",a[0].talent.benefit);const i=a[0].talent.talent;t.innerText=i,t.setAttribute("data-talent",i),t.onclick=()=>Gn(i),n.appendChild(t),e+=a[0].to,a.shift(),r=!0}else if(a.length>0){const i=document.createElement("span");i.innerText=t.substring(e,a[0].from),n.appendChild(i),e=a[0].from}else{const i=document.createElement("span");i.innerText=t.substring(e),n.appendChild(i),e=t.length}}else n.innerText=t;i.appendChild(n)}return t.appendChild(i),r}save(){const e=JSON.stringify(this.configData);console.log("save",`w40k-data-config-${this.source}`,e),localStorage.setItem(`w40k-data-config-${this.source}`,e);const n=function(e,{mode:n=7,enableEndMark:i=!0}={}){const r=Re(e,{mode:n,enableEndMark:i});return s=new Uint8Array(r),encodeURIComponent(function(e){for(var n,i=(3-e.length%3)%3,r="",s=e.length,o=0,a=0;a<s;a++)n=a%3,o|=e[a]<<(16>>>n&24),2!==n&&e.length-a!=1||(r+=String.fromCharCode(t(o>>>18&63),t(o>>>12&63),t(o>>>6&63),t(63&o)),o=0);return 0===i?r:r.substring(0,r.length-i)+(1===i?"=":"==")}(s).replace(/\+/g,"-").replace(/\//g,"_"));var s}(e),i=encodeURIComponent(e);document.getElementById("saveLink").href=`?source=${this.source}&cfg=${i}`,document.getElementById("saveLinkAlt").href=`?source=${this.source}&cfg=${n}`,document.getElementById("settingsToCopy").value=n}calcSkipAndSetMatchCount(e,t,n,i,r,s){return e.innerHTML=""+this.data.costs[t].cost[2-n][0],e.classList.add(`m${n}`),i.innerHTML=`${n}`,i.classList.add(`m${n}`),0===n&&r&&(s=!0),s}exportAllTableToExcelDef(e,t,n){document.getElementById("exportTableToExcelDef")?.remove();const i=this.exportDivToTable(e),r=this.exportDivToTable(t),s=this.exportDivToTable(n);if(!i)return;if(!r)return;if(!s)return;const o=document.createElement("div"),a=i.replace("<table>","").replace("</table>",""),c=r.replace("<table>","").replace("</table>",""),l=s.replace("<table>","").replace("</table>","");o.innerHTML=`<table>\n\t\t\t<tr><td>Characteristics</td></tr>\n\t\t\t<tr>\n\t\t\t\t<td>cost</td>\n\t\t\t\t<td>m</td>\n\t\t\t\t<td>skill</td>\n\t\t\t\t<td>aptitude</td>\n\t\t\t</tr>\n\t\t\t${a}\n\t\t\t<tr><td> </td></tr>\n\t\t\t<tr><td> </td></tr>\n\t\t\t<tr><td>Skills</td></tr>\n\t\t\t<tr>\n\t\t\t\t<td>cost</td>\n\t\t\t\t<td>m</td>\n\t\t\t\t<td>characteristic</td>\n\t\t\t\t<td>aptitude</td>\n\t\t\t\t<td>aptitude</td>\n\t\t\t</tr>\n\t\t\t${c}\n\t\t\t<tr><td> </td></tr>\n\t\t\t<tr><td> </td></tr>\n\t\t\t<tr><td>Talents</td></tr>\n\t\t\t<tr>\n\t\t\t\t<td>cost</td>\n\t\t\t\t<td>m</td>\n\t\t\t\t<td>tier</td>\n\t\t\t\t<td>talent</td>\n\t\t\t\t<td>aptitude</td>\n\t\t\t\t<td>aptitude</td>\n\t\t\t\t<td>requirement</td>\n\t\t\t\t<td>description</td>\n\t\t\t</tr>\n\t\t\t${l}\n\t\t\t</table>`,o.style.display="none",o.id="exportTableToExcelDef",document.body.appendChild(o),this.exportTableToExcel("exportTableToExcelDef","all")}exportTableToExcelDef(e){const t="exportTableToExcelDef_";document.getElementById(t)?.remove();const n=this.exportDivToTable(e);if(!n)return;const i=document.createElement("div");i.innerHTML=n,i.style.display="none",i.id=t,document.body.appendChild(i),this.exportTableToExcel(i.id,e)}exportDivToTable(e,t=!1){const n=document.getElementById(e);if(!n)return;let i="";t||(i+="<table>");for(let e=0;e<n.children.length;e++){t||(i+="<tr>");const r=n.children[e];for(let e=0;e<r.children.length;e++){const n=r.children[e],s=n.getAttribute("data-export");"false"!==s&&(t||(i+="<td>"),i+="true"===s||null===s?n.innerHTML:s,i+=t?"\t":"</td>")}i+=t?"\n":"</tr>"}return t||(i+="</table>"),i}exportTableToExcel(e,t=""){const n="application/vnd.ms-excel",i=document.getElementById(e);if(!i)return;const r=i.outerHTML.replace(/ /g,"%20");t=(t||"w40k")+".html.xls",document.getElementById("downloadLinkId")?.remove();const s=document.createElement("a");if(s.id="downloadLinkId",document.body.appendChild(s),navigator.msSaveOrOpenBlob){const e=new Blob(["\ufeff",r],{type:n});navigator.msSaveOrOpenBlob(e,t)}else s.href=`data:${n}, ${r}`,s.download=t,s.click()}copyTableDivToClipboard(e){const t=this.exportDivToTable(e,!0);if(!t)return;const n="1_textarea_copy_";document.getElementById(n+e)?.remove();const i=document.createElement("textarea");i.innerHTML=t,i.style.display="none",i.id=n+e,document.body.appendChild(i),i.select(),i.setSelectionRange(0,99999),navigator.clipboard.writeText(i.value)}copyWishlistToClipboard(e,t){const n=document.getElementById(e);if(!n)return;let i="";for(let e=0;e<n.children.length;e++){const r=n.children[e],s=r.children[1];"0"!=s.innerHTML&&"1"!=s.innerHTML||(i+=r.children[t].innerHTML+"\n")}const r="2_textarea_copy_"+e;document.getElementById(r)?.remove();const s=document.createElement("textarea");s.innerHTML=i,s.style.display="none",s.id=r,document.body.appendChild(s),s.select(),s.setSelectionRange(0,99999),navigator.clipboard.writeText(s.value).then((()=>{}))}logMatchingWorlds(e,t){if(!t.worlds||0==t.worlds.length)return;const n=document.getElementById("aptitudeWishlistSelect");if(n.selectedIndex>=0){console.log("logMatchingWorlds");const e=n.selectedOptions,i=[],r=[];for(let t=0;t<e.length;t++)i.push(this.data.optional[e[t].index]);console.log(i);for(let e=0;e<t.worlds.length;e++){let n=0;for(let r=0;r<i.length;r++)t.worlds[e].aptitude==i[r]&&n++;r.push(new zn(t.worlds[e],n))}r.sort(((e,t)=>t.matches-e.matches));for(let e=0;e<r.length;e++)console.log(r[e].world?.world,r[e].matches,r[e].world?.aptitude)}}logMatchingBackgrounds(e,t){if(!t.backgrounds||0==t.backgrounds.length)return;const n=document.getElementById("aptitudeWishlistSelect");if(n.selectedIndex>=0){console.log("logMatchingBackgrounds");const e=n.selectedOptions,i=[],r=[];for(let t=0;t<e.length;t++)i.push(this.data.optional[e[t].index]);console.log(i);for(let e=0;e<t.backgrounds.length;e++){let n=0;for(let r=0;r<i.length;r++)t.backgrounds[e].aptitude==i[r]&&n++;r.push(new qn(t.backgrounds[e],n))}r.sort(((e,t)=>t.matches-e.matches));for(let e=0;e<r.length;e++)console.log(r[e].background?.background,r[e].matches,r[e].background?.aptitude)}}logMatchingRoles(e,t){if(!t.roles||0==t.roles.length)return;const n=document.getElementById("aptitudeWishlistSelect");if(n.selectedIndex>=0){console.log("logMatchingRoles");const e=n.selectedOptions,i=[],r=[];for(let t=0;t<e.length;t++)i.push(this.data.optional[e[t].index]);console.log(i);for(let e=0;e<t.roles.length;e++){let n=0;for(let r=0;r<t.roles[e].aptitudes.length;r++)for(let s=0;s<i.length;s++)t.roles[e].aptitudes[r]==i[s]&&n++;r.push(new Fn(t.roles[e],n))}r.sort(((e,t)=>t.matches-e.matches));for(let e=0;e<r.length;e++)console.log(r[e].role?.role,r[e].matches,r[e].role?.aptitudes)}}logMatchingClasses(e,t){if(!t.classes||0==t.classes.length)return;const n=document.getElementById("aptitudeWishlistSelect");if(n.selectedIndex>=0){console.log("logMatchingClasses");const e=n.selectedOptions,i=[],r=[];for(let t=0;t<e.length;t++)i.push(this.data.optional[e[t].index]);console.log(i);for(let e=0;e<t.classes.length;e++){let n=0;for(let r=0;r<t.classes[e].aptitudes.length;r++)for(let s=0;s<i.length;s++)t.classes[e].aptitudes[r]==i[s]&&n++;r.push(new $n(t.classes[e],n))}r.sort(((e,t)=>t.matches-e.matches));for(let e=0;e<r.length;e++)console.log(r[e].class?.class,r[e].matches,r[e].class?.aptitudes)}}styleAptitudeMatches(e,t){for(let e=0;e<t.optional.length;e++){const n=t.optional[e];let i=document.getElementById("style-"+n.replace(" ","_"));i||(i=document.createElement("style"),i.id="style-"+n.replace(" ","_"),i.innerHTML=`.badge.badge-pill.badge-secondary.${n.replace(" ","_")}{background-color:#1cc88a !important}`,document.body.appendChild(i)),i.disabled=!0}const n=document.getElementById("aptitudeWishlistSelect");if(this.configData.aptitudesWishlist=[],n.selectedIndex>=0){const e=n.selectedOptions;for(let t=0;t<e.length;t++){const n=this.data.optional[e[t].index];this.configData.aptitudesWishlist.push(n),document.getElementById(`style-${n.replace(" ","_")}`).disabled=!1}}this.save()}expandsToAsList(e,t){const n=[];this.expandsToAsList$(e,n);const i=t.appendChild(document.createElement("ul"));return i.classList.add("limited-list"),n.forEach((t=>{const n=document.createElement("li");i.appendChild(n),this.talentPickToString(e,new Wn(t),n)})),t}expandsToAsList$(e,t){e.expandsTo&&e.expandsTo.length>0&&e.expandsTo.forEach((e=>{t.push(e),this.expandsToAsList$(e,t)}))}prerequisitesAsList(e,t){const n=[];this.prerequisitesAsList$(e.prerequisiteTree,n);const i=t.appendChild(document.createElement("ul"));return n.forEach((t=>{const n=document.createElement("li");i.appendChild(n),this.prerequisiteToString(e,t,n)})),t}prerequisitesAsList$(e,t){e&&(e.and&&e.and.length>0?e.and.forEach((e=>this.prerequisitesAsList$(e,t))):e.or&&e.or.length>0?e.or.forEach((e=>this.prerequisitesAsList$(e,t))):this.prerequisitesAsList$$(t,e))}prerequisitesAsList$$(e,t){let n=!1;t.characteristicPick?e.filter((e=>e.characteristicPick&&t.characteristicPick&&e.characteristicPick.characteristic==t.characteristicPick.characteristic)).forEach((e=>{e.characteristicPick.amount=Math.max(e.characteristicPick.amount,t.characteristicPick.amount),n=!0})):t.skillPick?e.filter((e=>e.skillPick&&t.skillPick&&e.skillPick.skill==t.skillPick.skill&&this.arrayEquals(e.skillPick.choices,t.skillPick.choices))).forEach((e=>{e.skillPick.amount=Math.max(e.skillPick.amount,t.skillPick.amount),n=!0})):t.talentPick?e.filter((e=>e.talentPick&&t.talentPick&&e.talentPick.talent==t.talentPick.talent&&this.arrayEquals(e.talentPick.choices,t.talentPick.choices))).length>0&&(n=!0):e.filter((e=>e.text&&t.text&&e.text==t.text)).length>0&&(n=!0),n||e.push(t),null!=t.talentPick&&this.prerequisitesAsList$(t.talentPick.talent.prerequisiteTree,e)}arrayEquals(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n].trim()!=t[n].trim())return!1;return!0}prerequisiteToString(e,t,n){if(t.and&&t.and.length>0)return!1;if(t.or&&t.or.length>0)return!1;if(t.characteristicPick)return n.appendChild(document.createElement("span")).innerHTML=`\n\t\t\t\t<characteristic>\n\t\t\t\t\t${t.characteristicPick.characteristic.name}\n\t\t\t\t</characteristic>\n\t\t\t\t${t.characteristicPick.amount}\n\t\t\t\t`,!0;if(t.skillPick){const e=t.skillPick.choices?"["+t.skillPick.choices.join(", ")+"]":"";return n.appendChild(document.createElement("span")).innerHTML=`\n\t\t\t\t<skill>\n\t\t\t\t\t${t.skillPick.skill.name}\n\t\t\t\t</skill>\n\t\t\t\t${e}\n\t\t\t\t+${t.skillPick.amount}\n\t\t\t\t`,!0}if(t.talentPick){const i=t.talentPick;return this.talentPickToString(e,i,n),!0}return!(!t.text||"-"===t.text||"—"===t.text||(n.appendChild(document.createElement("span")).innerHTML=t.text,0))}talentPickToString(e,t,n){const i=document.createElement("span");n.appendChild(i);const r=document.createElement("span");r.classList.add("jump-to-anchor");const s=t.talent.talent;r.innerHTML=`<talent>${s}</talent>`,r.setAttribute("data-talent",s);const o="popId_"+e.talent.replace(/[^a-zA-Z0-9]/g,"_");if(r.setAttribute("onclick",`\n\t\t\t\tdocument.getElementById('${o}')._tippy.hide();\n\t\t\t\t(window||global).$scrollToAnchor('${s}');\n\t\t\t\t`),i.appendChild(r),t.choices){const e=document.createElement("span");e.innerText=" ["+t.choices.join(", ")+"]",i.appendChild(e)}const a=document.createElement("span");a.classList.add("text-muted"),a.innerText=` (${t.talent.benefit})`,i.appendChild(a)}prerequisitesAsTree(e,t){const n=e.prerequisiteTree;if(!n)return t;if(n.and&&n.and.length>0){const i=document.createElement("ul");for(let t=0;t<n.and.length;t++){const r=n.and[t];if(r.or&&r.or.length>0)for(let t=0;t<r.or.length;t++){const n=r.or[t],s=document.createElement("li");this.prerequisitesAsTree$(e,n,s),i.appendChild(s)}else{const t=document.createElement("li");this.prerequisitesAsTree$(e,r,t),i.appendChild(t)}}t.appendChild(i)}else if(n.or&&n.or.length>0){const i=document.createElement("ul");for(let t=0;t<n.or.length;t++){const r=n.or[t],s=document.createElement("li");this.prerequisitesAsTree$(e,r,s),i.appendChild(s)}t.appendChild(i)}else{const i=document.createElement("ul"),r=document.createElement("li");this.prerequisitesAsTree$(e,n,r),i.appendChild(r),t.appendChild(i)}return t}prerequisitesAsTree$(e,t,n){this.prerequisiteToString(e,t,n),t.talentPick&&this.prerequisitesAsTree(t.talentPick.talent,n)}splitPrerequisitesToAnd(e){return e.split(/,(?![^()]*\))/).map((e=>e.trim()))}splitPrerequisitesToOr(e){return e.split(/ or (?!more\b)(?![^()]*\))/gi).map((e=>e.trim()))}buildPrerequisitesTree$$(e,t){for(let n=0;n<this.data.talents.length;n++){const i=this.data.talents[n],r=new RegExp("^"+i.talent+" \\((.+)\\)$","i");if(r.test(t.text)){const n=t.text.match(r)[1];t.talentPick=new Wn(i,n.split(",").map((e=>e.trim())).sort()),i.expandsTo.push(e)}else i.talent.toLowerCase()==t.text.toLowerCase()&&(t.talentPick=new Wn(i),i.expandsTo.push(e))}for(let e=0;e<this.data.characteristic.length;e++){const n=this.data.characteristic[e],i=new RegExp("^"+n.name+" (\\d+)$","i");if(i.test(t.text)){const e=t.text.match(i),r=parseInt(e[1]);t.characteristicPick=new In(n,r)}}for(let e=0;e<this.data.skills.length;e++){const n=this.data.skills[e],i=new RegExp("^"+n.name+" \\((.+)\\) \\+(\\d+)$","i"),r=new RegExp("^"+n.name+" \\+(\\d+)$","i");if(i.test(t.text)){const e=t.text.match(i),r=parseInt(e[2]),s=e[1];t.skillPick=new Hn(n,r,s.split(",").map((e=>e.trim())).sort())}else if(r.test(t.text)){const e=t.text.match(r),i=parseInt(e[1]);t.skillPick=new Hn(n,i)}}}buildPrerequisitesTree$(e){if(this.noPrerequisitesTalent(e))return;e.prerequisiteTree=new jn(e.prerequisites);const t=this.splitPrerequisitesToAnd(e.prerequisites),n=this.splitPrerequisitesToOr(e.prerequisites);1==t.length&&1==n.length?this.buildPrerequisitesTree$$(e,e.prerequisiteTree):t.length>1?t.forEach((t=>{const n=new jn(t);e.prerequisiteTree.and.push(n);const i=this.splitPrerequisitesToOr(t);1==i.length?this.buildPrerequisitesTree$$(e,n):i.forEach((t=>{const i=new jn(t);n.or.push(i),this.buildPrerequisitesTree$$(e,i)}))})):n.length>1&&n.forEach((t=>{const n=new jn(t);e.prerequisiteTree.or.push(n),this.buildPrerequisitesTree$$(e,n)}))}createResetLink(){document.getElementById("clearLink").href=`w40k.html?source=${this.source}&reset=true`}}).start()}();
//# sourceMappingURL=w40k.js.map