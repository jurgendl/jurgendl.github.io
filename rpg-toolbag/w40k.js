!function(){"use strict";var t;!function(t){t.General="General",t.Weapon_Skill="Weapon Skill",t.Ballistic_Skill="Ballistic Skill",t.Strength="Strength",t.Toughness="Toughness",t.Agility="Agility",t.Intelligence="Intelligence",t.Perception="Perception",t.Willpower="Willpower",t.Fellowship="Fellowship",t.Offence="Offence",t.Finesse="Finesse",t.Defence="Defence",t.Psyker="Psyker",t.Tech="Tech",t.Knowledge="Knowledge",t.Leadership="Leadership",t.Fieldcraft="Fieldcraft",t.Social="Social"}(t||(t={})),(new class{init(){fetch("assets/w40k.json").then((t=>t.json())).then((t=>this.app(t)))}data;selectedAptitudes=[];app(t){this.data=t;const e=document.getElementById("classSelect");{const t=document.createElement("option");t.text="None",e.add(t)}for(let t=0;t<this.data.classes.length;t++){const s=document.createElement("option");s.text=this.data.classes[t].class,s.value=this.data.classes[t].class,e.add(s)}e.addEventListener("change",(t=>{this.triggerRecalc(t)}));const s=document.getElementById("aptitudeSelect");{const t=document.createElement("option");t.text="None",s.add(t)}for(let t=0;t<this.data.optional.length;t++){const e=document.createElement("option");e.text=this.data.optional[t],e.value=this.data.optional[t],s.add(e)}s.addEventListener("change",(t=>{this.triggerRecalc(t)}))}triggerRecalc(t){this.selectedAptitudes=[],this.selectedAptitudes.push(this.data.free),console.log("free",this.data.free);const e=document.getElementById("classSelect");if(e.selectedIndex>0){const t=this.data.classes[e.selectedIndex-1].aptitudes;for(let s=0;s<t.length;s++)this.selectedAptitudes.push(t[s]),console.log("class",e.selectedIndex,s,t[s])}let s=null;const i=document.getElementById("aptitudeSelect");if(i.selectedIndex>0){const t=this.data.optional[i.selectedIndex-1];this.selectedAptitudes.includes(t)?s=t:(this.selectedAptitudes.push(t),console.log("apt",i.selectedIndex,t))}const n=document.getElementById("selectedAptitudes");console.log(this.selectedAptitudes),n.innerHTML=this.selectedAptitudes.join(", "),s&&(n.innerHTML+=", "+s+" (duplicate)");const a=document.getElementById("characteristic");a.innerHTML="";for(let t=0;t<this.data.characteristic.length;t++){const e=document.createElement("div");for(let s=0;s<this.data.costs.length;s++)if("characteristic"===this.data.costs[s].type){let i=0;this.selectedAptitudes.includes(this.data.characteristic[t].name)&&i++,this.selectedAptitudes.includes(this.data.characteristic[t].aptitude)&&i++,e.innerHTML=this.data.costs[s].cost[2-i][0]+"..."+this.data.costs[s].cost[2-i][3]+" ("+i+")",e.classList.add("m"+i)}a.appendChild(e);const s=document.createElement("div");s.innerHTML=this.data.characteristic[t].name,a.appendChild(s);const i=document.createElement("div");i.innerHTML=this.data.characteristic[t].aptitude,a.appendChild(i)}const d=document.getElementById("talent");d.innerHTML="";for(let t=0;t<this.data.talents.length;t++){const e=document.createElement("div");for(let s=0;s<this.data.costs.length;s++)if("talent"===this.data.costs[s].type){let i=0;this.selectedAptitudes.includes(this.data.talents[t].apt1)&&i++,this.selectedAptitudes.includes(this.data.talents[t].apt2)&&i++,e.innerHTML=this.data.costs[s].cost[2-i][this.data.talents[t].tier-1]+" ("+i+")",e.classList.add("m"+i)}d.appendChild(e);const s=document.createElement("div");s.innerHTML="T"+this.data.talents[t].tier,d.appendChild(s);const i=document.createElement("div");i.innerHTML=this.data.talents[t].talent,d.appendChild(i);const n=document.createElement("div");n.innerHTML=this.data.talents[t].apt1,d.appendChild(n);const a=document.createElement("div");a.innerHTML=this.data.talents[t].apt2,d.appendChild(a);const l=document.createElement("div");l.innerHTML=this.data.talents[t].prerequisites,d.appendChild(l)}const l=document.getElementById("skill");l.innerHTML="";for(let t=0;t<this.data.skills.length;t++){const e=document.createElement("div");for(let s=0;s<this.data.costs.length;s++)if("skill"===this.data.costs[s].type){let i=0;this.selectedAptitudes.includes(this.data.skills[t].aptitudes[0])&&i++,this.selectedAptitudes.includes(this.data.skills[t].aptitudes[1])&&i++,e.innerHTML=this.data.costs[s].cost[2-i][0]+"..."+this.data.costs[s].cost[2-i][3]+" ("+i+")",e.classList.add("m"+i)}l.appendChild(e);const s=document.createElement("div");s.innerHTML=this.data.skills[t].name,l.appendChild(s);for(let e=0;e<this.data.skills[t].aptitudes.length;e++){const s=document.createElement("div");s.innerHTML=this.data.skills[t].aptitudes[e],l.appendChild(s)}}}}).init()}();
//# sourceMappingURL=w40k.js.map