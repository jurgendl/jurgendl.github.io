!function(){"use strict";var e;!function(e){e.General="General",e.Weapon_Skill="Weapon Skill",e.Ballistic_Skill="Ballistic Skill",e.Strength="Strength",e.Toughness="Toughness",e.Agility="Agility",e.Intelligence="Intelligence",e.Perception="Perception",e.Willpower="Willpower",e.Fellowship="Fellowship",e.Offence="Offence",e.Finesse="Finesse",e.Defence="Defence",e.Psyker="Psyker",e.Tech="Tech",e.Knowledge="Knowledge",e.Leadership="Leadership",e.Fieldcraft="Fieldcraft",e.Social="Social"}(e||(e={})),(new class{init(){fetch("assets/w40k.json").then((e=>e.json())).then((e=>this.app(e)))}data;selectedAptitudes=[];app(e){this.data=e;const t=document.getElementById("classSelect");{const e=document.createElement("option");e.text="None",t.add(e)}for(let e=0;e<this.data.classes.length;e++){const s=document.createElement("option");s.text=this.data.classes[e].class,s.value=this.data.classes[e].class,t.add(s)}t.addEventListener("change",(e=>{this.triggerRecalc(e)}));const s=document.getElementById("aptitudeSelect");{const e=document.createElement("option");e.text="None",s.add(e)}for(let e=0;e<this.data.optional.length;e++){const t=document.createElement("option");t.text=this.data.optional[e],t.value=this.data.optional[e],s.add(t)}s.addEventListener("change",(e=>{this.triggerRecalc(e)}))}triggerRecalc(e){this.selectedAptitudes=[],this.selectedAptitudes.push(this.data.free),console.log("free",this.data.free);const t=document.getElementById("classSelect");if(t.selectedIndex>0){const e=this.data.classes[t.selectedIndex-1].aptitudes;for(let s=0;s<e.length;s++)this.selectedAptitudes.push(e[s]),console.log("class",t.selectedIndex,s,e[s])}let s=null;const d=document.getElementById("aptitudeSelect");if(d.selectedIndex>0){const e=this.data.optional[d.selectedIndex-1];this.selectedAptitudes.includes(e)?s=e:(this.selectedAptitudes.push(e),console.log("apt",d.selectedIndex,e))}const i=document.getElementById("selectedAptitudes");console.log(this.selectedAptitudes),i.innerHTML="<u>Aptitudes</u>: ";for(let e=0;e<this.selectedAptitudes.length;e++)i.innerHTML+="<span class='badge badge-secondary'>"+this.selectedAptitudes[e]+"</span>&nbsp;";s&&(i.innerHTML+="<span class='badge badge-danger'>"+s+" (duplicate)</span>");const n=document.getElementById("characteristic");n.innerHTML="";const l=this.data.characteristic.sort(((e,t)=>{let s=0;this.selectedAptitudes.includes(e.name)&&s++,this.selectedAptitudes.includes(e.aptitude)&&s++;let d=0;return this.selectedAptitudes.includes(t.name)&&d++,this.selectedAptitudes.includes(t.aptitude)&&d++,-s+d}));for(let e=0;e<l.length;e++){const t=document.createElement("div");for(let s=0;s<this.data.costs.length;s++)if("characteristic"===this.data.costs[s].type){let d=0;this.selectedAptitudes.includes(l[e].name)&&d++,this.selectedAptitudes.includes(l[e].aptitude)&&d++,t.innerHTML=this.data.costs[s].cost[2-d][0]+"..."+this.data.costs[s].cost[2-d][3]+" ("+d+")",t.classList.add("m"+d)}n.appendChild(t);const s=document.createElement("div");s.innerHTML=l[e].name,this.selectedAptitudes.includes(l[e].name)&&s.classList.add("m2"),n.appendChild(s);const d=document.createElement("div");d.innerHTML=l[e].aptitude,this.selectedAptitudes.includes(l[e].aptitude)&&d.classList.add("m2"),n.appendChild(d)}const c=document.getElementById("talent");c.innerHTML="";const a=this.data.talents.sort(((e,t)=>{let s=0;this.selectedAptitudes.includes(e.apt1)&&s++,this.selectedAptitudes.includes(e.apt2)&&s++;let d=0;return this.selectedAptitudes.includes(t.apt1)&&d++,this.selectedAptitudes.includes(t.apt2)&&d++,-s+d}));for(let e=0;e<a.length;e++){const t=document.createElement("div");for(let s=0;s<this.data.costs.length;s++)if("talent"===this.data.costs[s].type){let d=0;this.selectedAptitudes.includes(a[e].apt1)&&d++,this.selectedAptitudes.includes(a[e].apt2)&&d++,t.innerHTML=this.data.costs[s].cost[2-d][a[e].tier-1]+" ("+d+")",t.classList.add("m"+d)}c.appendChild(t);const s=document.createElement("div");s.innerHTML="T"+a[e].tier,c.appendChild(s);const d=document.createElement("div");d.innerHTML=a[e].talent,c.appendChild(d);const i=document.createElement("div");i.innerHTML=a[e].apt1,c.appendChild(i),this.selectedAptitudes.includes(a[e].apt1)&&i.classList.add("m2");const n=document.createElement("div");n.innerHTML=a[e].apt2,c.appendChild(n),this.selectedAptitudes.includes(a[e].apt2)&&n.classList.add("m2");const l=document.createElement("div");l.innerHTML=a[e].prerequisites,c.appendChild(l)}const o=document.getElementById("skill");o.innerHTML="";const p=this.data.skills.sort(((e,t)=>{let s=0;this.selectedAptitudes.includes(e.aptitudes[0])&&s++,this.selectedAptitudes.includes(e.aptitudes[1])&&s++;let d=0;return this.selectedAptitudes.includes(t.aptitudes[0])&&d++,this.selectedAptitudes.includes(t.aptitudes[1])&&d++,-s+d}));for(let e=0;e<p.length;e++){const t=document.createElement("div");for(let s=0;s<this.data.costs.length;s++)if("skill"===this.data.costs[s].type){let d=0;this.selectedAptitudes.includes(p[e].aptitudes[0])&&d++,this.selectedAptitudes.includes(p[e].aptitudes[1])&&d++,t.innerHTML=this.data.costs[s].cost[2-d][0]+"..."+this.data.costs[s].cost[2-d][3]+" ("+d+")",t.classList.add("m"+d)}o.appendChild(t);const s=document.createElement("div");s.innerHTML=p[e].name,o.appendChild(s);for(let t=0;t<p[e].aptitudes.length;t++){const s=document.createElement("div");s.innerHTML=p[e].aptitudes[t],this.selectedAptitudes.includes(p[e].aptitudes[t])&&s.classList.add("m2"),o.appendChild(s)}}}}).init()}();
//# sourceMappingURL=w40k.js.map