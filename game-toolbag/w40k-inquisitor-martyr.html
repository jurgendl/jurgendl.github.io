<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="preload" href="https://fonts.gstatic.com/s/breeserif/v17/4UaHrEJCrhhnVA3DgluA96Tp56N1.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="https://fonts.gstatic.com/s/breeserif/v17/4UaHrEJCrhhnVA3DgluA96rp5w.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <meta http-equiv="Cache-Control" content="must-revalidate, max-age=86400" />
  <!--<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />-->
  <!--<link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">-->
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&display=swap" rel="stylesheet">
  <!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/startbootstrap-sb-admin-2/4.1.4/css/sb-admin-2.css" integrity="sha512-gOfBez3ehpchNxj4TfBZfX1MDLKLRif67tFJNLQSpF13lXM1t9ffMNCbZfZNBfcN2/SaWvOf+7CvIHtQ0Nci2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/11.0.2/css/bootstrap-slider.min.css" integrity="sha512-3q8fi8M0VS+X/3n64Ndpp6Bit7oXSiyCnzmlx6IDBLGlY5euFySyJ46RUlqIVs0DPCGOypqP8IRk/EyPvU28mQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css">
  <style>
    .Magic {
      color: rgb(61, 142, 185);
    }

    .Rare {
      color: rgb(97, 189, 109);
    }

    .Artificer {
      color: rgb(147, 101, 184);
    }

    .Relic {
      color: rgb(243, 121, 52);
    }

    .Archeotech {
      color: rgb(184, 49, 47);
    }

    .bootstrap-select:not([class*=col-]):not([class*=form-control]):not(.input-group-btn) {
      width: 100% !important;
    }
  </style>

</head>

<body style="margin: 1em">

  <img id="p1" width="60" height="60" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
  <img id="p2" width="60" height="60" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
  <img id="p3" width="60" height="60" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
  <img id="p4" width="60" height="60" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
  <img id="p5" width="60" height="60" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
  <img id="p6" width="60" height="60" src="data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=">
  <div style="" id="description1">&nbsp;</div>
  <div style="" id="description2">&nbsp;</div>
  <div style="" id="description3">&nbsp;</div>
  <div style="" id="description4">&nbsp;</div>
  <div style="" id="description5">&nbsp;</div>
  <div style="" id="description6">&nbsp;</div>
  <div style="display:none" id="description">&nbsp;</div>
  <br>
  <br>
  <div class="row">
    <div class="col-sm-12">
      <div class="form-group">
        <select _data-header="Select a Psalm Doctrine" style="width: 100%;" id="selectDoctrine" name="selectDoctrine" _class="custom-select custom-select-sm" _class="selectpicker" data-style="btn-primary">
          <option></option>
        </select>
      </div>
    </div>
  </div>
  <!--https://developer.snapappointments.com/bootstrap-select/examples/-->
  <script src=" https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/p5@1.4.1/lib/p5.js"></script> -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/startbootstrap-sb-admin-2/4.1.4/js/sb-admin-2.js" integrity="sha512-M82XdXhPLLSki+Ld1MsafNzOgHQB3txZr8+SQlGXSwn6veeqtYhPLbQeAfk9Y/Q9/gXcfa1jWT4YYUeoei6Uow==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>-->
  <!-- https://bootstrap-confirmation.js.org/ -->
  <!-- https://github.com/mistic100/Bootstrap-Confirmation -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-confirmation2@4.1.0/dist/bootstrap-confirmation.min.js"></script>
  <!-- https://clipboardjs.com/ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>
  <!-- https://github.com/seiyria/bootstrap-slider -->
  <!-- https://seiyria.com/bootstrap-slider/ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/11.0.2/bootstrap-slider.min.js" integrity="sha512-f0VlzJbcEB6KiW8ZVtL+5HWPDyW1+nJEjguZ5IVnSQkvZbwBt2RfCBY0CBO1PsMAqxxrG4Di6TfsCPP3ZRwKpA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
  <!--<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/i18n/defaults-*.min.js"></script>-->


  <script>

    function setupPage(gameDate) {
      console.log('setupPage');
      console.log(gameDate);

      $.each(gameDate.doctrines, function (key, doctrine) {
        console.log(doctrine.id);
        console.log('    ' + doctrine.description);
        $('#selectDoctrine')
          .append($('<option>', { 'value': doctrine.id, 'data-subtext': doctrine.id })
            .text(doctrine.description));
      });
      document.querySelector('#selectDoctrine').value = 'Phosphoenic Psalm + Technomartyr Psalm + Neuralis Psalm + Binharic Psalm';

      // https://developer.snapappointments.com/bootstrap-select/
      $('#selectDoctrine').selectpicker();

      function selectDoctrineChange() {
        let choiceDoctrine = $("#selectDoctrine").find('option:selected').val();
        console.log(choiceDoctrine);
        $.each(gameDate.doctrines, function (key, doctrine) {
          //console.log(doctrine.id);
          if (doctrine.id == choiceDoctrine) {
            console.log(doctrine);
            $("#description").html(doctrine.description);
            var emptyImage = "data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=";
            $("#p1").attr("src", emptyImage);
            $("#p2").attr("src", emptyImage);
            $("#p3").attr("src", emptyImage);
            $("#p4").attr("src", emptyImage);
            $("#p5").attr("src", emptyImage);
            $("#p6").attr("src", emptyImage);
            $("#p1").attr("title", "");
            $("#p2").attr("title", "");
            $("#p3").attr("title", "");
            $("#p4").attr("title", "");
            $("#p5").attr("title", "");
            $("#p6").attr("title", "");
            $("#description1").text(" ");
            $("#description2").text(" ");
            $("#description3").text(" ");
            $("#description4").text(" ");
            $("#description5").text(" ");
            $("#description6").text(" ");
            $("#description1").attr("class", "");
            $("#description2").attr("class", "");
            $("#description3").attr("class", "");
            $("#description4").attr("class", "");
            $("#description5").attr("class", "");
            $("#description6").attr("class", "");
            doctrine.psalms.forEach((element, index) => {
              console.log(index + ": " + element);
              let psalm = gameDate.psalms.find(pe => pe.name == element);
              console.log(psalm.name);
              $("#p" + (index + 1)).attr("src", "data:image/png;base64," + psalm.image);
              $("#p" + (index + 1)).attr("title", psalm.name);
              $("#description" + (index + 1)).html('<u><b>' + psalm.name + '</b></u>: ' + psalm.description);
              $("#description" + (index + 1)).attr("class", psalm.level);
            });
            console.log("---------------");
          }
        });
      };
      $("#selectDoctrine").change(selectDoctrineChange);
      selectDoctrineChange();
    }

    // https://developer.mozilla.org/en-US/docs/Web/API/Response/json
    (() => {
      fetch('https://jurgendl.github.io/game-toolbag/w40k-inquisitor-martyr-code.json')
        .then((response) => response.json())
        .then((data) => setupPage(data));
    })();

  </script>

</body>

</html>