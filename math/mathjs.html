<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title></title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<!--<script src=" https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js "></script>-->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
	<!--<link href=" https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.css " rel="stylesheet">-->
	<link id="prismtheme" rel="stylesheet" href="assets/prism-1.29.0-custom.css">
	<script src="assets/prism-1.29.0-custom.js"></script>
	<link rel="stylesheet" href="scrollbars-but-nice.css">
	<link rel="stylesheet" href="assets/scrollbars-but-nice.css">
</head>

<body>
	<div style="height: 100vh; width: 100vw; display: flex; flex-direction: column; padding: 1em;">
		<a style="display: block; margin-bottom: 1rem;" target="_blank" href="https://mathjs.org/docs/index.html">Help @ Math.js</a>
		<div style="margin-bottom: 1rem; width: 100%;" class="input-group">
			<!--<input type="text" class="form-control" placeholder="input formula" id="input">-->
			<textarea style="resize: none; font-family: 'Courier New', Courier, monospace; font-size: 12px;" class="form-control" placeholder="input formula" id="input" rows="5" style="width: 100px;"></textarea>
			<button class="btn btn-primary" type="button" onclick="calculate()"><i class="fa-fw fa-solid fa-calculator"></i></button>
		</div>
		<div id="output" style="width: 100%; flex-grow: 1; overflow-y: scroll; padding-right: 5px;">
		</div>
	</div>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.3.0/math.js" integrity="sha512-TaKu3GlWLNU3fyPcvsSHSh44vX/Z43ePJDRTJr7IuUKVlUHHsHm7ODYNt5xffy75M6MOXsh7p+VyXCk5icuoxQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script>
		function calculate() {
			var input = document.getElementById('input').value;
			var output = document.getElementById('output');
			if (input == '') return;
			// replace newlines with semicolons except last line, skip empty lines
			input = input.split('\n').map(line => line.trim()).filter(line => line != '').map((line, index, array) => line).join(' ; ');
			if (input == '') return;
			const id = Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);
			try {
				const evaluated = math.evaluate(input);
				// replace ' ; ' with newlines
				input = input.split(' ; ').map(line => line.trim()).filter(line => line != '').map((line, index, array) => line).join('\n');
				output.innerHTML = `<pre><code id='id${id}' class="language-matlab">${input} = ${evaluated}</code></pre>` + output.innerHTML;
			} catch (e) {
				output.innerHTML = `<pre><code id='id${id}' class="language-plain">${input} : ${e}</code></pre>` + output.innerHTML;
			}
			// trigger prism highlight on element with id
			Prism.highlightElement(document.getElementById(`id${id}`));
		}
		document.getElementById('input').addEventListener('keyup', function (event) {
			// on control + enter calculate
			if (event.ctrlKey && event.keyCode === 13) {
				event.preventDefault();
				calculate();
				this.select();
			}
		});
		// input on focus select all
		document.getElementById('input').addEventListener('focus', function (event) {
			this.select();
		});
	</script>
	<script>
		function changeDarkMode(isDarkMode) {
			document.getElementById("prismtheme").href = isDarkMode ? "assets/prism-1.29.0-custom-oikaida.css" : "assets/prism-1.29.0-custom.css";
		}
	</script>
	<style>
		#darkmode-toggle-container {
			right: 20px !important;
		}
	</style>
	<script src="assets/theme-switch.js"></script>
</body>

</html>